<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2.15&nbsp;Garbage Collectors</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="scheme.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="course.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-plt-scheme-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Programming Language Design (Fall 2009)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewselflink" pltdoc="x">Assignments</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#(part._.Lectures)" class="tocviewlink" pltdoc="x">Lectures</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#(part._.Help)" class="tocviewlink" pltdoc="x">Help</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#(part._.Turn_.In_.Policy)" class="tocviewlink" pltdoc="x">Turn In Policy</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#(part._.Readings)" class="tocviewlink" pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#(part._software)" class="tocviewlink" pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#(part._.Exams)" class="tocviewlink" pltdoc="x">Exams</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="index.html#(part._.Grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="index.html#(part._.Your_.Final_.Grade)" class="tocviewlink" pltdoc="x">Your Final Grade</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="index.html#(part._.Team_.Work)" class="tocviewlink" pltdoc="x">Team Work</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="index.html#(part._.Codewalks)" class="tocviewlink" pltdoc="x">Codewalks</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="index.html#(part._.Advice)" class="tocviewlink" pltdoc="x">Advice</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewlink" pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="music.html" class="tocviewlink" pltdoc="x">Musical Notation</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="survey.html" class="tocviewlink" pltdoc="x">Survey</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="basic.html" class="tocviewlink" pltdoc="x">Basic Scheme</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="lists.html" class="tocviewlink" pltdoc="x">Lists and Trees</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="hof.html" class="tocviewlink" pltdoc="x">Higher-<wbr></wbr>order Functions</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="rinterp.html" class="tocviewlink" pltdoc="x">Rudimentary Interpreter</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="wsubst.html" class="tocviewlink" pltdoc="x">Substitution</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="xinterp.html" class="tocviewlink" pltdoc="x">Extended Interpreter</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="lazy.html" class="tocviewlink" pltdoc="x">Laziness and Infinite Data</a></td></tr><tr><td align="right">2.10&nbsp;</td><td><a href="wlazy.html" class="tocviewlink" pltdoc="x">Laziness</a></td></tr><tr><td align="right">2.11&nbsp;</td><td><a href="rawweb.html" class="tocviewlink" pltdoc="x">Raw Web Programming</a></td></tr><tr><td align="right">2.12&nbsp;</td><td><a href="wlang.html" class="tocviewlink" pltdoc="x">Language Design</a></td></tr><tr><td align="right">2.13&nbsp;</td><td><a href="wcont.html" class="tocviewlink" pltdoc="x">Continuations</a></td></tr><tr><td align="right">2.14&nbsp;</td><td><a href="pltweb.html" class="tocviewlink" pltdoc="x">PLT Web Programming</a></td></tr><tr><td align="right">2.15&nbsp;</td><td><a href="gc.html" class="tocviewselflink" pltdoc="x">Garbage Collectors</a></td></tr><tr><td align="right">2.16&nbsp;</td><td><a href="wgc.html" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">2.17&nbsp;</td><td><a href="wtypec.html" class="tocviewlink" pltdoc="x">Type Checking</a></td></tr><tr><td align="right">2.18&nbsp;</td><td><a href="typec.html" class="tocviewlink" pltdoc="x">Type Checker</a></td></tr><tr><td align="right">2.19&nbsp;</td><td><a href="typei.html" class="tocviewlink" pltdoc="x">Type Inferrer</a></td></tr><tr><td align="right">2.20&nbsp;</td><td><a href="wtypei.html" class="tocviewlink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">2.21&nbsp;</td><td><a href="prolog.html" class="tocviewlink" pltdoc="x">Prolog</a></td></tr><tr><td align="right">2.22&nbsp;</td><td><a href="final.html" class="tocviewlink" pltdoc="x">Final</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>2.15&nbsp;</td><td><a href="gc.html" class="tocviewselflink" pltdoc="x">Garbage Collectors</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.15.1&nbsp;</td><td><a href="gc.html#(part._.Writing_your_.Garbage_.Collectors)" class="tocviewlink" pltdoc="x">Writing your Garbage Collectors</a></td></tr><tr><td align="right">2.15.2&nbsp;</td><td><a href="gc.html#(part._.Testing_your_.Garbage_.Collectors)" class="tocviewlink" pltdoc="x">Testing your Garbage Collectors</a></td></tr><tr><td align="right">2.15.3&nbsp;</td><td><a href="gc.html#(part._.Sample_.Code)" class="tocviewlink" pltdoc="x">Sample Code</a></td></tr><tr><td align="right">2.15.4&nbsp;</td><td><a href="gc.html#(part._.Notes)" class="tocviewlink" pltdoc="x">Notes</a></td></tr><tr><td align="right">2.15.5&nbsp;</td><td><a href="gc.html#(part._gc-grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.15.1<tt>&nbsp;</tt></span><a href="#(part._.Writing_your_.Garbage_.Collectors)" class="tocsubseclink" pltdoc="x">Writing your Garbage Collectors</a></td></tr><tr><td><span class="tocsublinknumber">2.15.1.1<tt>&nbsp;</tt></span><a href="#(part._.Required_.Functions)" class="tocsubseclink" pltdoc="x">Required Functions</a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._init-allocator))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">init-<wbr></wbr>allocator</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aalloc-flat))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>alloc-<wbr></wbr>flat</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>cons</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons~3f))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>cons?</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3afirst))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>first</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-first!))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>set-<wbr></wbr>first!</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3arest))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>rest</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-rest!))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>set-<wbr></wbr>rest!</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aflat~3f))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>flat?</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aderef))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">gc:<span class="mywbr"> </span>deref</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.15.1.2<tt>&nbsp;</tt></span><a href="#(part._.Provided_.Functions)" class="tocsubseclink" pltdoc="x">Provided Functions</a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">heap-<wbr></wbr>value?</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">location?</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-size))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">heap-<wbr></wbr>size</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">heap-<wbr></wbr>set!</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">heap-<wbr></wbr>ref</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._root~3f))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">root?</span></span></a></td></tr><tr><td><a href="#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._get-root-set))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmStxLink">get-<wbr></wbr>root-<wbr></wbr>set</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._read-root))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">read-<wbr></wbr>root</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._set-root!))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">set-<wbr></wbr>root!</span></span></a></td></tr><tr><td><a href="#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._procedure-roots))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmValLink">procedure-<wbr></wbr>roots</span></span></a></td></tr><tr><td><a href="#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._allocator-setup))" class="tocsubnonseclink" pltdoc="x"><span class="ScmSym"><span class="ScmStxLink">allocator-<wbr></wbr>setup</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.15.2<tt>&nbsp;</tt></span><a href="#(part._.Testing_your_.Garbage_.Collectors)" class="tocsubseclink" pltdoc="x">Testing your Garbage Collectors</a></td></tr><tr><td><span class="tocsublinknumber">2.15.3<tt>&nbsp;</tt></span><a href="#(part._.Sample_.Code)" class="tocsubseclink" pltdoc="x">Sample Code</a></td></tr><tr><td><span class="tocsublinknumber">2.15.3.1<tt>&nbsp;</tt></span><a href="#(part._.Trivial_.Collector)" class="tocsubseclink" pltdoc="x">Trivial Collector</a></td></tr><tr><td><span class="tocsublinknumber">2.15.3.2<tt>&nbsp;</tt></span><a href="#(part._.Sample_.Mutator)" class="tocsubseclink" pltdoc="x">Sample Mutator</a></td></tr><tr><td><span class="tocsublinknumber">2.15.4<tt>&nbsp;</tt></span><a href="#(part._.Notes)" class="tocsubseclink" pltdoc="x">Notes</a></td></tr><tr><td><span class="tocsublinknumber">2.15.5<tt>&nbsp;</tt></span><a href="#(part._gc-grading)" class="tocsubseclink" pltdoc="x">Grading</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="pltweb.html" title="backward to &quot;2.14 PLT Web Programming&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="wgc.html" title="forward to &quot;2.16 Garbage Collection&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.15<tt>&nbsp;</tt><a name="(part._gc)"></a>Garbage Collectors</h4><p><span style="font-style: italic">Complete this assignment with Team Two.</span></p><p><span style="font-style: italic">You must submit this in an archive named <span class="stt">"gc.zip"</span>.</span></p><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"mark-and-sweep.ss"</span>.</span></p><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"stop-and-copy.ss"</span>.</span></p><p>In this assignment, you will implement two garbage collectors: mark &amp; sweep, and stop &amp; copy. As we have seen, garbage
collection involves starting from a root set of references, which reside in local variables and stack frames, and searching
for reachable values on the heap.</p><h5>2.15.1<tt>&nbsp;</tt><a name="(part._.Writing_your_.Garbage_.Collectors)"></a>Writing your Garbage Collectors</h5><p><div class="SIntrapara">You must complete this part of the assignment in the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">GC Collector Scheme</span> language. You can do so by choosing it from the
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Language|Choose Language...</span> menu in DrScheme or via the language chooser at the bottom-left.
You can also choose the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Module</span> language and have the following as the <span style="font-style: italic">first line</span> of your program:
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><a href="http://docs.plt-scheme.org/guide/Module_Syntax.html#(part._hash-lang)" class="ScmModLink" pltdoc="x"><span class="ScmMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.plt-scheme.org/planet/hash-lang-planet.html" class="ScmModLink" pltdoc="x"><span class="ScmSym">planet</span></a><span class="hspace">&nbsp;</span><span class="ScmSym">plai/plai/collector</span></div></p><p>This language defines an interface to a program&rsquo;s stack and heap that you will use to implement garbage collection.</p><h5>2.15.1.1<tt>&nbsp;</tt><a name="(part._.Required_.Functions)"></a>Required Functions</h5><p>Your garbage collectors must implement the following functions:</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._init-allocator))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._init-allocator))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._init-allocator))" class="ScmValLink" pltdoc="x">init-allocator</a></span><span class="ScmPn"></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/void.html#(def._((quote._~23~25kernel)._void))" class="ScmValLink" pltdoc="x">void</a></span></td></tr></table></div><div class="SIntrapara">The mutator implicitly calls this function after initializing the heap and before calling any allocation routines.
It is essentially a callback into the allocator indicating that the heap is ready.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aalloc-flat))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aalloc-flat))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aalloc-flat))" class="ScmValLink" pltdoc="x">gc:alloc-flat</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))" class="ScmValLink" pltdoc="x">heap-value?</a></span></td></tr></table></div><div class="SIntrapara">Allocates space for a flat value and returns the base address of the allocated block.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons))" class="ScmValLink" pltdoc="x">gc:cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">first-addr</span><span class="hspace">&nbsp;</span><span class="ScmVar">rest-addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">first-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">rest-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Returns the address of a new cons cell with the given field addresses; the field addresses are presumed to be already allocated.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons~3f))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons~3f))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons~3f))" class="ScmValLink" pltdoc="x">gc:cons?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="ScmValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Returns a boolean that indicates whether the given address refers to a cons cell.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3afirst))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3afirst))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3afirst))" class="ScmValLink" pltdoc="x">gc:first</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">cons-addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">cons-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Returns the address of the first part of a cons.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-first!))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-first!))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-first!))" class="ScmValLink" pltdoc="x">gc:set-first!</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">cons-addr</span><span class="hspace">&nbsp;</span><span class="ScmVar">first-addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/void.html#(def._((quote._~23~25kernel)._void))" class="ScmValLink" pltdoc="x">void</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">cons-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">first-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Sets the address of the first part of a cons.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3arest))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3arest))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3arest))" class="ScmValLink" pltdoc="x">gc:rest</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">cons-addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">cons-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Returns the address of the rest part of a cons.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-rest!))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-rest!))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-rest!))" class="ScmValLink" pltdoc="x">gc:set-rest!</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">cons-addr</span><span class="hspace">&nbsp;</span><span class="ScmVar">rest-addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/void.html#(def._((quote._~23~25kernel)._void))" class="ScmValLink" pltdoc="x">void</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">cons-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">rest-addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Sets the address of the rest part of a cons.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aflat~3f))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aflat~3f))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aflat~3f))" class="ScmValLink" pltdoc="x">gc:flat?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="ScmValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Returns a boolean that indicates whether the given address refers to an atomic value.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aderef))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aderef))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aderef))" class="ScmValLink" pltdoc="x">gc:deref</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))" class="ScmValLink" pltdoc="x">heap-value?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Returns the atomic value stored at the given address.</div></p><h5>2.15.1.2<tt>&nbsp;</tt><a name="(part._.Provided_.Functions)"></a>Provided Functions</h5><p>To help you write these functions, the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">GC Collector Scheme</span> language defines an interface for the heap and the roots:</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))" class="ScmValLink" pltdoc="x">heap-value?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="ScmValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fguts..ss)._any%2Fc))" class="ScmValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Equivalent to </div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._or))" class="ScmStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="ScmValLink" pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="ScmValLink" pltdoc="x">procedure?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty~3f))" class="ScmValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="ScmPn">)</span></div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="ScmValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fguts..ss)._any%2Fc))" class="ScmValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">A location is an integer between <span class="ScmVal">0</span> and <span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._-))" class="ScmValLink" pltdoc="x">-</a></span><span class="stt"> </span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-size))" class="ScmValLink" pltdoc="x">heap-size</a></span><span class="ScmPn">)</span><span class="stt"> </span><span class="ScmVal">1</span><span class="ScmPn">)</span> inclusive.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-size))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-size))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-size))" class="ScmValLink" pltdoc="x">heap-size</a></span><span class="ScmPn"></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span></td></tr></table></div><div class="SIntrapara">Returns the size of the heap.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">addr</span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/void.html#(def._((quote._~23~25kernel)._void))" class="ScmValLink" pltdoc="x">void</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))" class="ScmValLink" pltdoc="x">heap-value?</a></span></td></tr></table></div><div class="SIntrapara">Stores a value at the specified address.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))" class="ScmValLink" pltdoc="x">heap-ref</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">addr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-value~3f))" class="ScmValLink" pltdoc="x">heap-value?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">addr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Returns the value at the specified address.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._root~3f))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._root~3f))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._root~3f))" class="ScmValLink" pltdoc="x">root?</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="ScmValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fguts..ss)._any%2Fc))" class="ScmValLink" pltdoc="x">any/c</a></span></td></tr></table></div><div class="SIntrapara">Determines if <span class="ScmVar">v</span> is a root.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._get-root-set))"></a><a name="(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._get-root-set))"></a><span class="ScmSym"><a href="gc.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._get-root-set))" class="ScmStxLink" pltdoc="x">get-root-set</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">root-identifier</span><span class="hspace">&nbsp;</span><span class="ScmMeta">...</span><span class="ScmPn">)</span></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="ScmVar">root-identifier</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/stxops.html#(def._((lib._scheme%2Fprivate%2Fstx..ss)._identifier~3f))" class="ScmValLink" pltdoc="x">identifier?</a></span></td></tr></table></td></tr></table></div><div class="SIntrapara">Returns the roots of the collection, including local roots created for each <span class="ScmVar">root-identifier</span>.</div></p><p><span style="font-weight: bold">Note:</span> Sometimes you have to fake roots in case a live object is only reachable from arguments passed to a collector function. For example, you should pass the first and rest addresses to <span class="ScmSym"><a href="gc.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._get-root-set))" class="ScmStxLink" pltdoc="x">get-root-set</a></span> in your implementation of <span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons))" class="ScmValLink" pltdoc="x">gc:cons</a></span>. (This is not the only example!)</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._read-root))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._read-root))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._read-root))" class="ScmValLink" pltdoc="x">read-root</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">r</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._root~3f))" class="ScmValLink" pltdoc="x">root?</a></span></td></tr></table></div><div class="SIntrapara">Returns the address the root references.
</div><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._set-root!))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._set-root!))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._set-root!))" class="ScmValLink" pltdoc="x">set-root!</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">r</span><span class="hspace">&nbsp;</span><span class="ScmVar">a</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/void.html#(def._((quote._~23~25kernel)._void))" class="ScmValLink" pltdoc="x">void</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">r</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._root~3f))" class="ScmValLink" pltdoc="x">root?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">a</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._location~3f))" class="ScmValLink" pltdoc="x">location?</a></span></td></tr></table></div><div class="SIntrapara">Updates the root to reference the specified address.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._procedure-roots))"></a><a name="(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._procedure-roots))"></a><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._procedure-roots))" class="ScmValLink" pltdoc="x">procedure-roots</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">proc</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._root~3f))" class="ScmValLink" pltdoc="x">root?</a></span><span class="ScmPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="ScmValLink" pltdoc="x">procedure?</a></span></td></tr></table></div><div class="SIntrapara">Given a closure stored on the heap, returns a list of the roots reachable from the closure&#8217;s environment. If <span class="ScmVar">proc</span> is not reachable, the empty list is returned.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="ScmPn">(</span><a name="(dep._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._allocator-setup))"></a><a name="(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._allocator-setup))"></a><span class="ScmSym"><a href="gc.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._allocator-setup))" class="ScmStxLink" pltdoc="x">allocator-setup</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">collector-file</span><span class="hspace">&nbsp;</span><span class="ScmVar">heap-size</span><span class="ScmPn">)</span></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><blockquote class="SubFlow"><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="ScmVar">collector-file</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="ScmValLink" pltdoc="x">string?</a></span></td></tr></table><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="ScmVar">heap-size</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">Uses <span class="ScmVar">collector-file</span> for the collector with a heap initialized to <span class="ScmVar">heap-size</span>.</div></p><h5>2.15.2<tt>&nbsp;</tt><a name="(part._.Testing_your_.Garbage_.Collectors)"></a>Testing your Garbage Collectors</h5><p><div class="SIntrapara">You must complete this part of the assignment in the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">GC Mutator Scheme</span> language. You can do so by choosing it from the
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Language|Choose Language...</span> menu in DrScheme or via the language chooser at the bottom-left.
You can also choose the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Module</span> language and have the following as the <span style="font-style: italic">first line</span> of your program:
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><a href="http://docs.plt-scheme.org/guide/Module_Syntax.html#(part._hash-lang)" class="ScmModLink" pltdoc="x"><span class="ScmMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.plt-scheme.org/planet/hash-lang-planet.html" class="ScmModLink" pltdoc="x"><span class="ScmSym">planet</span></a><span class="hspace">&nbsp;</span><span class="ScmSym">plai/plai/mutator</span></div></p><p><div class="SIntrapara">This language is a subset of Scheme that uses a garbage collector that you specify. The first line of a test program must be:
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._allocator-setup))" class="ScmStxLink" pltdoc="x">allocator-setup</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"collector.ss"</span><span class="hspace">&nbsp;</span><span class="ScmVar">heap-size</span><span class="ScmPn">)</span></div><div class="SIntrapara">where <span class="ScmVal">"collector.ss"</span> must be the name of your collector&rsquo;s file. <span class="ScmVar">heap-size</span> is the size of the heap your collector will use.</div></p><p>The remainder of the program is in a subset of Scheme with numbers, symbols, lists, etc.
The primitives of the language map directly to the procedures you define in your garbage collector.</p><h5>2.15.3<tt>&nbsp;</tt><a name="(part._.Sample_.Code)"></a>Sample Code</h5><p>To get you started, we&rsquo;ve provided a sample mutator and a trivial collector that signals an error when the heap fills up.
(In fact, our collector does signal an error with the mutator we&rsquo;ve provided, if you don&rsquo;t increase the size of the heap.)</p><h5>2.15.3.1<tt>&nbsp;</tt><a name="(part._.Trivial_.Collector)"></a>Trivial Collector</h5><p><span class="stt">"collector.ss"</span>:</p><p><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="http://docs.plt-scheme.org/guide/Module_Syntax.html#(part._hash-lang)" class="ScmModLink" pltdoc="x"><span class="ScmMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.plt-scheme.org/planet/hash-lang-planet.html" class="ScmModLink" pltdoc="x"><span class="ScmSym">planet</span></a><span class="hspace">&nbsp;</span><span class="ScmSym">plai/plai/collector</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">uninitialized-heap-ptr</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._init-allocator))" class="ScmValLink" pltdoc="x">init-allocator</a></span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">0</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aalloc-flat))" class="ScmValLink" pltdoc="x">gc:alloc-flat</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">p</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/begin.html#(form._((quote._~23~25kernel)._begin))" class="ScmStxLink" pltdoc="x">begin</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/when_unless.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._when))" class="ScmStxLink" pltdoc="x">when</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._~3e))" class="ScmValLink" pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-size))" class="ScmValLink" pltdoc="x">heap-size</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">gc:alloc-flat</span><span class="hspace">&nbsp;</span><span class="ScmVal">"out of memory"</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">prim</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">p</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._-))" class="ScmValLink" pltdoc="x">-</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons))" class="ScmValLink" pltdoc="x">gc:cons</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmSym">r</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/begin.html#(form._((quote._~23~25kernel)._begin))" class="ScmStxLink" pltdoc="x">begin</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/when_unless.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._when))" class="ScmStxLink" pltdoc="x">when</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._~3e))" class="ScmValLink" pltdoc="x">&gt;</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-size))" class="ScmValLink" pltdoc="x">heap-size</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">gc:cons</span><span class="hspace">&nbsp;</span><span class="ScmVal">"out of memory"</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">cons</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">r</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._-))" class="ScmValLink" pltdoc="x">-</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">heap-ptr</span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons~3f))" class="ScmValLink" pltdoc="x">gc:cons?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="ScmValLink" pltdoc="x">eq?</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))" class="ScmValLink" pltdoc="x">heap-ref</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">cons</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3afirst))" class="ScmValLink" pltdoc="x">gc:first</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))" class="ScmValLink" pltdoc="x">heap-ref</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3arest))" class="ScmValLink" pltdoc="x">gc:rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))" class="ScmValLink" pltdoc="x">heap-ref</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-first!))" class="ScmValLink" pltdoc="x">gc:set-first!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3acons~3f))" class="ScmValLink" pltdoc="x">gc:cons?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">set-first!</span><span class="hspace">&nbsp;</span><span class="ScmVal">"expects address of cons"</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aset-rest!))" class="ScmValLink" pltdoc="x">gc:set-rest!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="hspace">&nbsp;</span><span class="ScmSym">r</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-set!))" class="ScmValLink" pltdoc="x">heap-set!</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">r</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aflat~3f))" class="ScmValLink" pltdoc="x">gc:flat?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="ScmValLink" pltdoc="x">eq?</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))" class="ScmValLink" pltdoc="x">heap-ref</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">prim</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._gc~3aderef))" class="ScmValLink" pltdoc="x">gc:deref</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._heap-ref))" class="ScmValLink" pltdoc="x">heap-ref</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr></table></p><h5>2.15.3.2<tt>&nbsp;</tt><a name="(part._.Sample_.Mutator)"></a>Sample Mutator</h5><p><span class="stt">"mutator.ss"</span>:</p><p><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="http://docs.plt-scheme.org/guide/Module_Syntax.html#(part._hash-lang)" class="ScmModLink" pltdoc="x"><span class="ScmMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.plt-scheme.org/planet/hash-lang-planet.html" class="ScmModLink" pltdoc="x"><span class="ScmSym">planet</span></a><span class="hspace">&nbsp;</span><span class="ScmSym">plai/plai/mutator</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="gc.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/a/gc/gc..ss._allocator-setup))" class="ScmStxLink" pltdoc="x">allocator-setup</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"collector.ss"</span><span class="hspace">&nbsp;</span><span class="ScmVal">84</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact</span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._zero~3f))" class="ScmValLink" pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmVal">1</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._*))" class="ScmValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._sub1))" class="ScmValLink" pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact-help</span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._zero~3f))" class="ScmValLink" pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">a</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact-help</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._sub1))" class="ScmValLink" pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._*))" class="ScmValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmSym">a</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty))" class="ScmValLink" pltdoc="x">empty</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">map-add</span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fprivate%2Fmap..ss)._map))" class="ScmValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/lambda.html#(form._((lib._scheme%2Fbase..ss)._lambda))" class="ScmStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">x</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fprivate%2Fmap..ss)._map))" class="ScmValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._cons~3f))" class="ScmValLink" pltdoc="x">cons?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fprivate%2Fmap..ss)._map))" class="ScmValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty))" class="ScmValLink" pltdoc="x">empty</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">p</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._cons~3f))" class="ScmValLink" pltdoc="x">cons?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">p</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">p</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">p</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._append))" class="ScmValLink" pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l1</span><span class="hspace">&nbsp;</span><span class="ScmSym">l2</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._cons~3f))" class="ScmValLink" pltdoc="x">cons?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l1</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l1</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._append))" class="ScmValLink" pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l1</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">l2</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">l2</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._length))" class="ScmValLink" pltdoc="x">length</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty~3f))" class="ScmValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmVal">0</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._add1))" class="ScmValLink" pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._length))" class="ScmValLink" pltdoc="x">length</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">tail</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty))" class="ScmValLink" pltdoc="x">empty</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">4</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="hspace">&nbsp;</span><span class="ScmSym">tail</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym">set-rest!</span><span class="hspace">&nbsp;</span><span class="ScmSym">tail</span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty))" class="ScmValLink" pltdoc="x">empty</a></span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">tail</span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._length))" class="ScmValLink" pltdoc="x">length</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">(</span><span class="ScmVal">hello</span><span class="hspace">&nbsp;</span><span class="ScmVal">goodbye</span><span class="ScmVal">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fprivate%2Fmap..ss)._map))" class="ScmValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._sub1))" class="ScmValLink" pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(fact-help 15 1): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact-help</span><span class="hspace">&nbsp;</span><span class="ScmVal">15</span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(fact 9): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact</span><span class="hspace">&nbsp;</span><span class="ScmVal">9</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(append lst lst): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._append))" class="ScmValLink" pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(map-add 5 lst): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">map-add</span><span class="hspace">&nbsp;</span><span class="ScmVal">5</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(filter even? (map sub1 lst)): ~a~n"</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._even~3f))" class="ScmValLink" pltdoc="x">even?</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fprivate%2Fmap..ss)._map))" class="ScmValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._sub1))" class="ScmValLink" pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(length lst): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._length))" class="ScmValLink" pltdoc="x">length</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr></table></p><p>If your collector works correctly on the heap size you&rsquo;ve specified, this should result in:</p><p><table cellspacing="0"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">res #0={4 3 2 1 . #0#}</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty))" class="ScmValLink" pltdoc="x">empty</a></span><span class="ScmPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">tail</span><span class="hspace">&nbsp;</span><span class="ScmSym">head</span><span class="ScmPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">res (1 2 3)</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._length))" class="ScmValLink" pltdoc="x">length</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">(</span><span class="ScmVal">hello</span><span class="hspace">&nbsp;</span><span class="ScmVal">goodbye</span><span class="ScmVal">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">res 2</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"res ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fprivate%2Fmap..ss)._map))" class="ScmValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._sub1))" class="ScmValLink" pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">res (0 1 2)</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(fact-help 15 1): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact-help</span><span class="hspace">&nbsp;</span><span class="ScmVal">15</span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">(fact-help 15 1): 1307674368000</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(fact 9): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fact</span><span class="hspace">&nbsp;</span><span class="ScmVal">9</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">(fact 9): 362880</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(append lst lst): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._append))" class="ScmValLink" pltdoc="x">append</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">(append lst lst): (1 2 3 1 2 3)</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(map-add 5 lst): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">map-add</span><span class="hspace">&nbsp;</span><span class="ScmVal">5</span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">(map-add 5 lst): (6 7 8)</span></p></td></tr><tr><td><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(filter even? (map sub1 lst)): ~a~n"</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._even~3f))" class="ScmValLink" pltdoc="x">even?</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fprivate%2Fmap..ss)._map))" class="ScmValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._sub1))" class="ScmValLink" pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr></table></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">(filter even? (map sub1 lst)): (0 2)</span></p></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&gt; </span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Writing.html#(def._((quote._~23~25kernel)._printf))" class="ScmValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">"(length lst): ~a~n"</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._length))" class="ScmValLink" pltdoc="x">length</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">lst</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmOut">(length lst): 3</span></p></td></tr></table></p><h5>2.15.4<tt>&nbsp;</tt><a name="(part._.Notes)"></a>Notes</h5><p>You must store bookkeeping data on the heap provided by <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">GC Collector Scheme.</span> You may store 2-3 atomic values,
such as addresses into the heap as variables in your garbage collector. We will assume they represent machine registers.
However, all compound data structures must be on the heap.</p><p>In particular, in the mark &amp; sweep collector, you should maintain a free list in the heap. That is, you should not use
any auxiliary data structure; instead, use the available space in the heap to keep track of the free list. You may use
one extra box (&ldquo;register&rdquo;) to point to the start of the free list. You may need to adjust your allocation accordingly
to have enough space to maintain free list pointers!</p><p><div class="SIntrapara">Some final words of advice:
</div><div class="SIntrapara"><ul><li><p>You will want to test your program with small heap sizes, so that the garbage collector runs frequently.</p></li><li><p>You do not need to compact memory in mark-and-sweep.</p></li><li><p>You may find it convenient to use the Scheme construct <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/set_.html#(form._((quote._~23~25kernel)._set!))" class="ScmStxLink" pltdoc="x">set!</a></span>, which allows you to mutate a variable without using boxes.
We recommend you use this feature only in one instance: when swapping the semispaces in the stop &amp; copy collector.
This will save you the trouble of unboxing the heap every time you use it.</p></li></ul></div></p><h5>2.15.5<tt>&nbsp;</tt><a name="(part._gc-grading)"></a>Grading</h5><p>This assignment is graded as a written assignment. The <a href="index.html#(part._grading-code)" pltdoc="x">coding style guidelines</a> count as a single question.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="pltweb.html" title="backward to &quot;2.14 PLT Web Programming&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="wgc.html" title="forward to &quot;2.16 Garbage Collection&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>