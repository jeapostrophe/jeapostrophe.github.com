<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2.13&nbsp;Continuations</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="scheme.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="course.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-plt-scheme-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Programming Language Design (Fall 2009)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewselflink" pltdoc="x">Assignments</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#(part._.Lectures)" class="tocviewlink" pltdoc="x">Lectures</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#(part._.Help)" class="tocviewlink" pltdoc="x">Help</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#(part._.Turn_.In_.Policy)" class="tocviewlink" pltdoc="x">Turn In Policy</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#(part._.Readings)" class="tocviewlink" pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#(part._software)" class="tocviewlink" pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#(part._.Exams)" class="tocviewlink" pltdoc="x">Exams</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="index.html#(part._.Grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="index.html#(part._.Your_.Final_.Grade)" class="tocviewlink" pltdoc="x">Your Final Grade</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="index.html#(part._.Team_.Work)" class="tocviewlink" pltdoc="x">Team Work</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="index.html#(part._.Codewalks)" class="tocviewlink" pltdoc="x">Codewalks</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="index.html#(part._.Advice)" class="tocviewlink" pltdoc="x">Advice</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewlink" pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="music.html" class="tocviewlink" pltdoc="x">Musical Notation</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="survey.html" class="tocviewlink" pltdoc="x">Survey</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="basic.html" class="tocviewlink" pltdoc="x">Basic Scheme</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="lists.html" class="tocviewlink" pltdoc="x">Lists and Trees</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="hof.html" class="tocviewlink" pltdoc="x">Higher-<wbr></wbr>order Functions</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="rinterp.html" class="tocviewlink" pltdoc="x">Rudimentary Interpreter</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="wsubst.html" class="tocviewlink" pltdoc="x">Substitution</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="xinterp.html" class="tocviewlink" pltdoc="x">Extended Interpreter</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="lazy.html" class="tocviewlink" pltdoc="x">Laziness and Infinite Data</a></td></tr><tr><td align="right">2.10&nbsp;</td><td><a href="wlazy.html" class="tocviewlink" pltdoc="x">Laziness</a></td></tr><tr><td align="right">2.11&nbsp;</td><td><a href="rawweb.html" class="tocviewlink" pltdoc="x">Raw Web Programming</a></td></tr><tr><td align="right">2.12&nbsp;</td><td><a href="wlang.html" class="tocviewlink" pltdoc="x">Language Design</a></td></tr><tr><td align="right">2.13&nbsp;</td><td><a href="wcont.html" class="tocviewselflink" pltdoc="x">Continuations</a></td></tr><tr><td align="right">2.14&nbsp;</td><td><a href="pltweb.html" class="tocviewlink" pltdoc="x">PLT Web Programming</a></td></tr><tr><td align="right">2.15&nbsp;</td><td><a href="gc.html" class="tocviewlink" pltdoc="x">Garbage Collectors</a></td></tr><tr><td align="right">2.16&nbsp;</td><td><a href="wgc.html" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">2.17&nbsp;</td><td><a href="wtypec.html" class="tocviewlink" pltdoc="x">Type Checking</a></td></tr><tr><td align="right">2.18&nbsp;</td><td><a href="typec.html" class="tocviewlink" pltdoc="x">Type Checker</a></td></tr><tr><td align="right">2.19&nbsp;</td><td><a href="typei.html" class="tocviewlink" pltdoc="x">Type Inferrer</a></td></tr><tr><td align="right">2.20&nbsp;</td><td><a href="wtypei.html" class="tocviewlink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">2.21&nbsp;</td><td><a href="prolog.html" class="tocviewlink" pltdoc="x">Prolog</a></td></tr><tr><td align="right">2.22&nbsp;</td><td><a href="final.html" class="tocviewlink" pltdoc="x">Final</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>2.13&nbsp;</td><td><a href="wcont.html" class="tocviewselflink" pltdoc="x">Continuations</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.13.1&nbsp;</td><td><a href="wcont.html#(part._.Stack_.Space)" class="tocviewlink" pltdoc="x">Stack Space</a></td></tr><tr><td align="right">2.13.2&nbsp;</td><td><a href="wcont.html#(part._.C.P.S_.Transformation)" class="tocviewlink" pltdoc="x">CPS Transformation</a></td></tr><tr><td align="right">2.13.3&nbsp;</td><td><a href="wcont.html#(part._.Stack_.Inspection)" class="tocviewlink" pltdoc="x">Stack Inspection</a></td></tr><tr><td align="right">2.13.4&nbsp;</td><td><a href="wcont.html#(part._wcont-app)" class="tocviewlink" pltdoc="x">Application</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.13.1<tt>&nbsp;</tt></span><a href="#(part._.Stack_.Space)" class="tocsubseclink" pltdoc="x">Stack Space</a></td></tr><tr><td><span class="tocsublinknumber">2.13.2<tt>&nbsp;</tt></span><a href="#(part._.C.P.S_.Transformation)" class="tocsubseclink" pltdoc="x">CPS Transformation</a></td></tr><tr><td><span class="tocsublinknumber">2.13.3<tt>&nbsp;</tt></span><a href="#(part._.Stack_.Inspection)" class="tocsubseclink" pltdoc="x">Stack Inspection</a></td></tr><tr><td><span class="tocsublinknumber">2.13.4<tt>&nbsp;</tt></span><a href="#(part._wcont-app)" class="tocsubseclink" pltdoc="x">Application</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="wlang.html" title="backward to &quot;2.12 Language Design&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="pltweb.html" title="forward to &quot;2.14 PLT Web Programming&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.13<tt>&nbsp;</tt><a name="(part._wcont)"></a>Continuations</h4><p><span style="font-style: italic">Complete this assignment with Team Two.</span></p><p><span style="font-style: italic">You must submit this in an archive named <span class="stt">"wcont.zip"</span>.</span></p><h5>2.13.1<tt>&nbsp;</tt><a name="(part._.Stack_.Space)"></a>Stack Space</h5><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"whynostack.pdf"</span>.</span></p><p>Any program that consumes some amount of stack, when converted to CPS and run, suddenly consumes no stack space at all. Why?</p><h5>2.13.2<tt>&nbsp;</tt><a name="(part._.C.P.S_.Transformation)"></a>CPS Transformation</h5><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"filterk.ss"</span>.</span></p><p>CPS the following Scheme function. You don&rsquo;t need to CPS primitives such as <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty~3f))" class="ScmValLink" pltdoc="x">empty?</a></span>, <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span>, <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span>, <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span>,
<span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._cons~3f))" class="ScmValLink" pltdoc="x">cons?</a></span> and <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._~3c))" class="ScmValLink" pltdoc="x">&lt;</a></span>. You may also assume that the function argument to both of the functions is in CPS.
Name the result <span class="ScmSym">filter/k</span> as shown below.</p><p><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">filter: (x -&gt; bool) (listof x) -&gt; (listof x)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._cond))" class="ScmStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty~3f))" class="ScmValLink" pltdoc="x">empty?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty))" class="ScmValLink" pltdoc="x">empty</a></span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._cond))" class="ScmStxLink" pltdoc="x">cond</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmPn">(</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._rest))" class="ScmValLink" pltdoc="x">rest</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">filter/k: (x receiver -&gt; doesn't) (listof x) receiver -&gt; doesn't</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">filter/k</span><span class="hspace">&nbsp;</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="hspace">&nbsp;</span><span class="ScmSym">k</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmSym">....</span><span class="ScmPn">)</span></td></tr></table></p><p><div class="SIntrapara">Now change the following expressions to use <span class="ScmSym">filter/k</span>.
</div><div class="SIntrapara"><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">less-than-three</span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._~3c))" class="ScmValLink" pltdoc="x">&lt;</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Fbase..ss)._filter))" class="ScmValLink" pltdoc="x">filter</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">less-than-three</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">1</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">4</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._empty))" class="ScmValLink" pltdoc="x">empty</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">this evaluates to (list 1)</span></td></tr></table></div></p><h5>2.13.3<tt>&nbsp;</tt><a name="(part._.Stack_.Inspection)"></a>Stack Inspection</h5><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"stackinspect.ss"</span>.</span></p><p>The Java security model uses a primitive called <a href="http://www.cs.princeton.edu/sip/pub/oakland98.pdf"><span style="font-style: italic">stack inspection.</span></a>
Let us implement a simple version of this. Assume the language had two new primitives:</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">Note:</span> Java lacks tail-call optimization ostensibly because this hurts the ability to implement stack inspection.
In fact, <a href="http://www.ccs.neu.edu/scheme/pubs/cf-toplas04.pdf">this claim is entirely false</a>.
But we&rsquo;re stuck with the result of this decision, making the JVM a poor target for
other language compilers. Unfortunately, .NET has also adopted this mistake, as the paper explains.</p></blockquote></blockquote></blockquote><p><table cellspacing="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">E</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmVar">....</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym">bless</span><span class="hspace">&nbsp;</span><span class="ScmVar">E</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym">check</span><span class="ScmPn">)</span></td></tr></table></p><p>The <span class="ScmSym">bless</span> primitive creates a blessed stack frame for the duration of evaluating its sub-expression.
The <span class="ScmSym">check</span> primitive traverses the run-time stack; if it finds a blessed frame it evaluates to 0
(so you can, for instance, use it inside sums without affecting the outcome), otherwise it terminates the program&rsquo;s execution.</p><p>Extend the CPSed interpreter presented in the text in Figure 20.2 with these two new language constructs.</p><p>For your convenience, here is a file to start with:</p><p><div class="SIntrapara"><span class="stt">"stackinspect.ss"</span>:
</div><div class="SIntrapara"><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><a href="http://docs.plt-scheme.org/guide/Module_Syntax.html#(part._hash-lang)" class="ScmModLink" pltdoc="x"><span class="ScmMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.plt-scheme.org/planet/hash-lang-planet.html" class="ScmModLink" pltdoc="x"><span class="ScmSym">planet</span></a><span class="hspace">&nbsp;</span><span class="ScmSym">plai/plai</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">num</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">add</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lhs</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">rhs</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">id</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">if0</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test))" class="ScmValLink" pltdoc="x">test</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">truth</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">falsity</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">fun</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">param</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">app</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fun-expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">arg-expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">bless</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">check</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">closureV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">p</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="ScmValLink" pltdoc="x">procedure?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">contV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">c</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="ScmValLink" pltdoc="x">procedure?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">DefrdSub</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">mtSub</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">aSub</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">value</span><span class="hspace">&nbsp;</span><span class="ScmSym">KCFAE-Value?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">ds</span><span class="hspace">&nbsp;</span><span class="ScmSym">DefrdSub?</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">lookup : symbol DefrdSub -&gt; KCFAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lookup</span><span class="hspace">&nbsp;</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym">ds</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._type-case))" class="ScmStxLink" pltdoc="x">type-case</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">DefrdSub</span><span class="hspace">&nbsp;</span><span class="ScmSym">ds</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">mtSub</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">lookup</span><span class="hspace">&nbsp;</span><span class="ScmVal">"no binding for identifier"</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">aSub</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">bound-name</span><span class="hspace">&nbsp;</span><span class="ScmSym">bound-value</span><span class="hspace">&nbsp;</span><span class="ScmSym">rest-ds</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/booleans.html#(def._((lib._scheme%2Fbool..ss)._symbol~3d~3f))" class="ScmValLink" pltdoc="x">symbol=?</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">bound-name</span><span class="hspace">&nbsp;</span><span class="ScmSym">name</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">bound-value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lookup</span><span class="hspace">&nbsp;</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym">rest-ds</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">num+ : KCFAE-Value KCFAE-Value -&gt; KCFAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">num+</span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmSym">y</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._type-case))" class="ScmStxLink" pltdoc="x">type-case</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">KCFAE-Value</span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">num+</span><span class="hspace">&nbsp;</span><span class="ScmVal">"addition of a non-number"</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._type-case))" class="ScmStxLink" pltdoc="x">type-case</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">KCFAE-Value</span><span class="hspace">&nbsp;</span><span class="ScmSym">y</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">num+</span><span class="hspace">&nbsp;</span><span class="ScmVal">"addition of a non-number"</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">num-zero? : KCFAE-Value -&gt; boolean</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">num-zero?</span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._type-case))" class="ScmStxLink" pltdoc="x">type-case</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">KCFAE-Value</span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._~3d))" class="ScmValLink" pltdoc="x">=</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmVal">0</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">num-zero?</span><span class="hspace">&nbsp;</span><span class="ScmVal">"argument must be a number"</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">interp : KCFAE Env receiver -&gt; (doesn't)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">k</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._type-case))" class="ScmStxLink" pltdoc="x">type-case</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">KCFAE</span><span class="hspace">&nbsp;</span><span class="ScmSym">expr</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">num</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">k</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmSym">n</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">add</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">l</span><span class="hspace">&nbsp;</span><span class="ScmSym">r</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">l</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/lambda.html#(form._((lib._scheme%2Fbase..ss)._lambda))" class="ScmStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lv</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">r</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/lambda.html#(form._((lib._scheme%2Fbase..ss)._lambda))" class="ScmStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">rv</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">k</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">num+</span><span class="hspace">&nbsp;</span><span class="ScmSym">lv</span><span class="hspace">&nbsp;</span><span class="ScmSym">rv</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">if0</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test))" class="ScmValLink" pltdoc="x">test</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">truth</span><span class="hspace">&nbsp;</span><span class="ScmSym">falsity</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="index.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test))" class="ScmValLink" pltdoc="x">test</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/lambda.html#(form._((lib._scheme%2Fbase..ss)._lambda))" class="ScmStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">tv</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((quote._~23~25kernel)._if))" class="ScmStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">num-zero?</span><span class="hspace">&nbsp;</span><span class="ScmSym">tv</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">truth</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">k</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">falsity</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">k</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">id</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">v</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">k</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lookup</span><span class="hspace">&nbsp;</span><span class="ScmSym">v</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">fun</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">param</span><span class="hspace">&nbsp;</span><span class="ScmSym">body</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">k</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">closureV</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/lambda.html#(form._((lib._scheme%2Fbase..ss)._lambda))" class="ScmStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">arg-val</span><span class="hspace">&nbsp;</span><span class="ScmSym">dyn-k</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">aSub</span><span class="hspace">&nbsp;</span><span class="ScmSym">param</span><span class="hspace">&nbsp;</span><span class="ScmSym">arg-val</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">dyn-k</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">app</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fun-expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">arg-expr</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">fun-expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/lambda.html#(form._((lib._scheme%2Fbase..ss)._lambda))" class="ScmStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">fun-val</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">arg-expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/lambda.html#(form._((lib._scheme%2Fbase..ss)._lambda))" class="ScmStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">arg-val</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._type-case))" class="ScmStxLink" pltdoc="x">type-case</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmSym">KCFAE-Value</span><span class="hspace">&nbsp;</span><span class="ScmSym">fun-val</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">closureV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">c</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">c</span><span class="hspace">&nbsp;</span><span class="ScmSym">arg-val</span><span class="hspace">&nbsp;</span><span class="ScmSym">k</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">contV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">c</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">c</span><span class="hspace">&nbsp;</span><span class="ScmSym">arg-val</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">interp</span><span class="hspace">&nbsp;</span><span class="ScmVal">"not an applicable value"</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span><span class="hspace">&nbsp;</span><span class="ScmVal">'</span><span class="ScmVal">interp</span><span class="hspace">&nbsp;</span><span class="ScmVal">"incomplete interp!"</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">test-interp : KCFAE -&gt; KCFAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">test-interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">expr</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/cont.html#(form._((lib._scheme%2Fprivate%2Fmore-scheme..ss)._let%2Fcc))" class="ScmStxLink" pltdoc="x">let/cc</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">k</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">expr</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">mtSub</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmSym">k</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test))" class="ScmValLink" pltdoc="x">test</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">test-interp</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">add</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">num</span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">num</span><span class="hspace">&nbsp;</span><span class="ScmVal">4</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmVal">7</span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr></table></div></p><h5>2.13.4<tt>&nbsp;</tt><a name="(part._wcont-app)"></a>Application</h5><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"wcont-app.pdf"</span>.</span></p><p>In 850 words or less, describe if and how your knowledge of continuations and CPS will help you in your future programming practice.
Good answers might discuss how this concept can be applied in interesting programming environments or how knowledge of its subtleties
clarifies or improves existing practices, techniques, tools, etc.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="wlang.html" title="backward to &quot;2.12 Language Design&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="pltweb.html" title="forward to &quot;2.14 PLT Web Programming&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>