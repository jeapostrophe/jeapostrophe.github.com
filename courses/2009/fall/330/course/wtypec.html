<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2.17&nbsp;Type Checking</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="scheme.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="course.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-plt-scheme-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Programming Language Design (Fall 2009)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewselflink" pltdoc="x">Assignments</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#(part._.Lectures)" class="tocviewlink" pltdoc="x">Lectures</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#(part._.Help)" class="tocviewlink" pltdoc="x">Help</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#(part._.Turn_.In_.Policy)" class="tocviewlink" pltdoc="x">Turn In Policy</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#(part._.Readings)" class="tocviewlink" pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#(part._software)" class="tocviewlink" pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#(part._.Exams)" class="tocviewlink" pltdoc="x">Exams</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="index.html#(part._.Grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="index.html#(part._.Your_.Final_.Grade)" class="tocviewlink" pltdoc="x">Your Final Grade</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="index.html#(part._.Team_.Work)" class="tocviewlink" pltdoc="x">Team Work</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="index.html#(part._.Codewalks)" class="tocviewlink" pltdoc="x">Codewalks</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="index.html#(part._.Advice)" class="tocviewlink" pltdoc="x">Advice</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewlink" pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="music.html" class="tocviewlink" pltdoc="x">Musical Notation</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="survey.html" class="tocviewlink" pltdoc="x">Survey</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="basic.html" class="tocviewlink" pltdoc="x">Basic Scheme</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="lists.html" class="tocviewlink" pltdoc="x">Lists and Trees</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="hof.html" class="tocviewlink" pltdoc="x">Higher-<wbr></wbr>order Functions</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="rinterp.html" class="tocviewlink" pltdoc="x">Rudimentary Interpreter</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="wsubst.html" class="tocviewlink" pltdoc="x">Substitution</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="xinterp.html" class="tocviewlink" pltdoc="x">Extended Interpreter</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="lazy.html" class="tocviewlink" pltdoc="x">Laziness and Infinite Data</a></td></tr><tr><td align="right">2.10&nbsp;</td><td><a href="wlazy.html" class="tocviewlink" pltdoc="x">Laziness</a></td></tr><tr><td align="right">2.11&nbsp;</td><td><a href="rawweb.html" class="tocviewlink" pltdoc="x">Raw Web Programming</a></td></tr><tr><td align="right">2.12&nbsp;</td><td><a href="wlang.html" class="tocviewlink" pltdoc="x">Language Design</a></td></tr><tr><td align="right">2.13&nbsp;</td><td><a href="wcont.html" class="tocviewlink" pltdoc="x">Continuations</a></td></tr><tr><td align="right">2.14&nbsp;</td><td><a href="pltweb.html" class="tocviewlink" pltdoc="x">PLT Web Programming</a></td></tr><tr><td align="right">2.15&nbsp;</td><td><a href="gc.html" class="tocviewlink" pltdoc="x">Garbage Collectors</a></td></tr><tr><td align="right">2.16&nbsp;</td><td><a href="wgc.html" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">2.17&nbsp;</td><td><a href="wtypec.html" class="tocviewselflink" pltdoc="x">Type Checking</a></td></tr><tr><td align="right">2.18&nbsp;</td><td><a href="typec.html" class="tocviewlink" pltdoc="x">Type Checker</a></td></tr><tr><td align="right">2.19&nbsp;</td><td><a href="typei.html" class="tocviewlink" pltdoc="x">Type Inferrer</a></td></tr><tr><td align="right">2.20&nbsp;</td><td><a href="wtypei.html" class="tocviewlink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">2.21&nbsp;</td><td><a href="prolog.html" class="tocviewlink" pltdoc="x">Prolog</a></td></tr><tr><td align="right">2.22&nbsp;</td><td><a href="final.html" class="tocviewlink" pltdoc="x">Final</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>2.17&nbsp;</td><td><a href="wtypec.html" class="tocviewselflink" pltdoc="x">Type Checking</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.17.1&nbsp;</td><td><a href="wtypec.html#(part._.Variant_.Types)" class="tocviewlink" pltdoc="x">Variant Types</a></td></tr><tr><td align="right">2.17.2&nbsp;</td><td><a href="wtypec.html#(part._.Lazy_.Type_.Checking)" class="tocviewlink" pltdoc="x">Lazy Type Checking</a></td></tr><tr><td align="right">2.17.3&nbsp;</td><td><a href="wtypec.html#(part._wtypec-app)" class="tocviewlink" pltdoc="x">Application</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.17.1<tt>&nbsp;</tt></span><a href="#(part._.Variant_.Types)" class="tocsubseclink" pltdoc="x">Variant Types</a></td></tr><tr><td><span class="tocsublinknumber">2.17.2<tt>&nbsp;</tt></span><a href="#(part._.Lazy_.Type_.Checking)" class="tocsubseclink" pltdoc="x">Lazy Type Checking</a></td></tr><tr><td><span class="tocsublinknumber">2.17.3<tt>&nbsp;</tt></span><a href="#(part._wtypec-app)" class="tocsubseclink" pltdoc="x">Application</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="wgc.html" title="backward to &quot;2.16 Garbage Collection&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="typec.html" title="forward to &quot;2.18 Type Checker&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.17<tt>&nbsp;</tt><a name="(part._wtypec)"></a>Type Checking</h4><p><span style="font-style: italic">Complete this assignment with Team Three.</span></p><p><span style="font-style: italic">You must submit this in an archive named <span class="stt">"wtypec.zip"</span>.</span></p><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"wtypec.pdf"</span>.</span></p><h5>2.17.1<tt>&nbsp;</tt><a name="(part._.Variant_.Types)"></a>Variant Types</h5><p>This problem is extremely open-ended. It reflects the kind of question you may need to answer if you ever design a language.</p><p>Consider our typing rules for datatypes. A datatype declaration defines a new type (such as <span class="ScmSym">nlist</span>), and each constructor (eg, <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="ScmValLink" pltdoc="x">cons</a></span>)
creates a value of that type. As a result, however, selectors (such as <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/pairs.html#(def._((lib._scheme%2Flist..ss)._first))" class="ScmValLink" pltdoc="x">first</a></span>) cannot statically determine whether or not they have
been given the correct variant (there are two variants of lists, for instance) of the datatype, and must rely on a check from the
run-time system.</p><p>Your boss, who thinks he has a better idea of how to design a type system (your colleagues always do, and so do your students) thinks
you&rsquo;ve made a poor decision. He says that if you instead create a new type for each variant, you can give a very precise type for the
selector thus turning the dynamic check into a static one, thereby increasing the effectiveness of the type system.
(You ask him what to do about the new type declared in the datatype declaration: should the programmer no longer declare it? Should
     they declare two or three new types when defining lists? He hasn&rsquo;t of course thought this issue out in that much depth&#8212;that&rsquo;s
     your problem&#8212;so he just murmurs and asks you to do at least a little work in return for the brainwave he&rsquo;s just handed you.)</p><p>Write at most a page (of reasonably-sized text) exploring this question. Can we build an effective type system out of this idea? If
so, how, and if not, why not? If so, why hasn&#8217;t someone already done this? If not, can we turn this germ of an idea into something
that actually works? Have you seen any languages that do something like this? Solutions to this problem which are much shorter than
one page are certainly acceptable so long as they get the point across.</p><h5>2.17.2<tt>&nbsp;</tt><a name="(part._.Lazy_.Type_.Checking)"></a>Lazy Type Checking</h5><p>Consider the type judgments discussed in the textbook. These rules are for an eager language.
Consider the lazy version of the language instead. Pay special attention to the typing rules for</p><ul><li><p>function definition</p></li><li><p>function application</p></li></ul><p>For each one, provide a new rule or, if you believe the existing rule does not change, explain why not.
(If you believe neither rule changes, you can answer both parts together.) If you believe any other type
judgments should change, mention those as well.</p><h5>2.17.3<tt>&nbsp;</tt><a name="(part._wtypec-app)"></a>Application</h5><p>In 850 words or less, describe if and how your knowledge of type checking will help you in your future programming practice.
Good answers might discuss how this concept can be applied in interesting programming environments or how knowledge of its subtleties
clarifies or improves existing practices, techniques, tools, etc.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="wgc.html" title="backward to &quot;2.16 Garbage Collection&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="typec.html" title="forward to &quot;2.18 Type Checker&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>