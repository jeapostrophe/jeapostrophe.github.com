<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2.8&nbsp;Extended Interpreter</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="scheme.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="course.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-plt-scheme-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Programming Language Design (Fall 2009)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewselflink" pltdoc="x">Assignments</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#(part._.Lectures)" class="tocviewlink" pltdoc="x">Lectures</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#(part._.Help)" class="tocviewlink" pltdoc="x">Help</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#(part._.Turn_.In_.Policy)" class="tocviewlink" pltdoc="x">Turn In Policy</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#(part._.Readings)" class="tocviewlink" pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#(part._software)" class="tocviewlink" pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#(part._.Exams)" class="tocviewlink" pltdoc="x">Exams</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="index.html#(part._.Grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="index.html#(part._.Your_.Final_.Grade)" class="tocviewlink" pltdoc="x">Your Final Grade</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="index.html#(part._.Team_.Work)" class="tocviewlink" pltdoc="x">Team Work</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="index.html#(part._.Codewalks)" class="tocviewlink" pltdoc="x">Codewalks</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="index.html#(part._.Advice)" class="tocviewlink" pltdoc="x">Advice</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewlink" pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="music.html" class="tocviewlink" pltdoc="x">Musical Notation</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="survey.html" class="tocviewlink" pltdoc="x">Survey</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="basic.html" class="tocviewlink" pltdoc="x">Basic Scheme</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="lists.html" class="tocviewlink" pltdoc="x">Lists and Trees</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="hof.html" class="tocviewlink" pltdoc="x">Higher-<wbr></wbr>order Functions</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="rinterp.html" class="tocviewlink" pltdoc="x">Rudimentary Interpreter</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="wsubst.html" class="tocviewlink" pltdoc="x">Substitution</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="xinterp.html" class="tocviewselflink" pltdoc="x">Extended Interpreter</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="lazy.html" class="tocviewlink" pltdoc="x">Laziness and Infinite Data</a></td></tr><tr><td align="right">2.10&nbsp;</td><td><a href="wlazy.html" class="tocviewlink" pltdoc="x">Laziness</a></td></tr><tr><td align="right">2.11&nbsp;</td><td><a href="rawweb.html" class="tocviewlink" pltdoc="x">Raw Web Programming</a></td></tr><tr><td align="right">2.12&nbsp;</td><td><a href="wlang.html" class="tocviewlink" pltdoc="x">Language Design</a></td></tr><tr><td align="right">2.13&nbsp;</td><td><a href="wcont.html" class="tocviewlink" pltdoc="x">Continuations</a></td></tr><tr><td align="right">2.14&nbsp;</td><td><a href="pltweb.html" class="tocviewlink" pltdoc="x">PLT Web Programming</a></td></tr><tr><td align="right">2.15&nbsp;</td><td><a href="gc.html" class="tocviewlink" pltdoc="x">Garbage Collectors</a></td></tr><tr><td align="right">2.16&nbsp;</td><td><a href="wgc.html" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">2.17&nbsp;</td><td><a href="wtypec.html" class="tocviewlink" pltdoc="x">Type Checking</a></td></tr><tr><td align="right">2.18&nbsp;</td><td><a href="typec.html" class="tocviewlink" pltdoc="x">Type Checker</a></td></tr><tr><td align="right">2.19&nbsp;</td><td><a href="typei.html" class="tocviewlink" pltdoc="x">Type Inferrer</a></td></tr><tr><td align="right">2.20&nbsp;</td><td><a href="wtypei.html" class="tocviewlink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">2.21&nbsp;</td><td><a href="prolog.html" class="tocviewlink" pltdoc="x">Prolog</a></td></tr><tr><td align="right">2.22&nbsp;</td><td><a href="final.html" class="tocviewlink" pltdoc="x">Final</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>2.8&nbsp;</td><td><a href="xinterp.html" class="tocviewselflink" pltdoc="x">Extended Interpreter</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.8.1&nbsp;</td><td><a href="xinterp.html#(part._.F.W.A.E)" class="tocviewlink" pltdoc="x">FWAE</a></td></tr><tr><td align="right">2.8.2&nbsp;</td><td><a href="xinterp.html#(part._cfwae._.C.F.W.A.E)" class="tocviewlink" pltdoc="x">CFWAE</a></td></tr><tr><td align="right">2.8.3&nbsp;</td><td><a href="xinterp.html#(part._cfwae-lazy._.C.F.W.A.E__.Lazy_)" class="tocviewlink" pltdoc="x">CFWAE (Lazy)</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.8.1<tt>&nbsp;</tt></span><a href="#(part._.F.W.A.E)" class="tocsubseclink" pltdoc="x">FWAE</a></td></tr><tr><td><span class="tocsublinknumber">2.8.2<tt>&nbsp;</tt></span><a href="#(part._.C.F.W.A.E)" class="tocsubseclink" pltdoc="x">CFWAE</a></td></tr><tr><td><span class="tocsublinknumber">2.8.2.1<tt>&nbsp;</tt></span><a href="#(part._.Syntax)" class="tocsubseclink" pltdoc="x">Syntax</a></td></tr><tr><td><span class="tocsublinknumber">2.8.2.2<tt>&nbsp;</tt></span><a href="#(part._.Template)" class="tocsubseclink" pltdoc="x">Template</a></td></tr><tr><td><span class="tocsublinknumber">2.8.2.3<tt>&nbsp;</tt></span><a href="#(part._.Conditionals)" class="tocsubseclink" pltdoc="x">Conditionals</a></td></tr><tr><td><span class="tocsublinknumber">2.8.2.4<tt>&nbsp;</tt></span><a href="#(part._.Multi-argument_fun)" class="tocsubseclink" pltdoc="x">Multi-<wbr></wbr>argument <span class="ScmSym">fun</span></a></td></tr><tr><td><span class="tocsublinknumber">2.8.2.5<tt>&nbsp;</tt></span><a href="#(part._.Tests)" class="tocsubseclink" pltdoc="x">Tests</a></td></tr><tr><td><span class="tocsublinknumber">2.8.3<tt>&nbsp;</tt></span><a href="#(part._.C.F.W.A.E__.Lazy_)" class="tocsubseclink" pltdoc="x">CFWAE (Lazy)</a></td></tr><tr><td><span class="tocsublinknumber">2.8.3.1<tt>&nbsp;</tt></span><a href="#(part._.Template)" class="tocsubseclink" pltdoc="x">Template</a></td></tr><tr><td><span class="tocsublinknumber">2.8.3.2<tt>&nbsp;</tt></span><a href="#(part._.Tests)" class="tocsubseclink" pltdoc="x">Tests</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="wsubst.html" title="backward to &quot;2.7 Substitution&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="lazy.html" title="forward to &quot;2.9 Laziness and Infinite Data&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.8<tt>&nbsp;</tt><a name="(part._xinterp)"></a>Extended Interpreter</h4><p><span style="font-style: italic">You must complete this assignment by yourself.</span></p><p><span style="font-style: italic">You must submit this in an archive named <span class="stt">"xinterp.zip"</span>.</span></p><p><div class="SIntrapara">You must complete this assignment in the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">PLAI Scheme</span> language. You can do so by choosing it from the
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Language|Choose Language...</span> menu in DrScheme or via the language chooser at the bottom-left.
You can also choose the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Module</span> language and have the following as the <span style="font-style: italic">first line</span> of your program:
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><a href="http://docs.plt-scheme.org/guide/Module_Syntax.html#(part._hash-lang)" class="ScmModLink" pltdoc="x"><span class="ScmMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="http://docs.plt-scheme.org/planet/hash-lang-planet.html" class="ScmModLink" pltdoc="x"><span class="ScmSym">planet</span></a><span class="hspace">&nbsp;</span><span class="ScmSym">plai/plai</span></div></p><h5>2.8.1<tt>&nbsp;</tt><a name="(part._.F.W.A.E)"></a>FWAE</h5><p>Write a parser and interpreter for the FWAE language from class.</p><h5>2.8.2<tt>&nbsp;</tt><a name="(part._cfwae._.C.F.W.A.E)"></a>CFWAE</h5><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"xinterp.ss"</span>.</span></p><p>Extend FWAE with the language features described below. Your interpreter should have eager application semantics
and use deferred substitution. Call the new language CFWAE (conditionals, functions, with, and arithmetic expressions).</p><h5>2.8.2.1<tt>&nbsp;</tt><a name="(part._cfwae._.Syntax)"></a>Syntax</h5><p>The syntax of the CFWAE language with these additional features can be captured with the following grammar:</p><p><table cellspacing="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="ScmVar">CFWAE</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmVar">number</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2B))" class="ScmValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._-))" class="ScmValLink" pltdoc="x">-</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._*))" class="ScmValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2F))" class="ScmValLink" pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmVar">id</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym">if0</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym">with</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmPn">[</span><span class="ScmVar">id</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">]</span><span class="hspace">&nbsp;</span><span class="ScmSym">...</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmSym">fun</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmVar">id</span><span class="hspace">&nbsp;</span><span class="ScmSym">...</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmVar">CFWAE</span><span class="ScmPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="ScmPn">(</span><span class="ScmVar">CFWAE</span><span class="hspace">&nbsp;</span><span class="ScmSym">...</span><span class="ScmPn">)</span></td></tr></table></p><p>where <span class="ScmSym">number</span> is a Scheme number and <span class="ScmSym">id</span> is not <span class="ScmVal">'</span><span class="ScmVal">+</span>, <span class="ScmVal">'</span><span class="ScmVal">-</span>,
<span class="ScmVal">'</span><span class="ScmVal">*</span>, <span class="ScmVal">'</span><span class="ScmVal">/</span>, <span class="ScmVal">'</span><span class="ScmVal">with</span>, <span class="ScmVal">'</span><span class="ScmVal">if0</span>, or <span class="ScmVal">'</span><span class="ScmVal">fun</span>.</p><p><div class="SIntrapara">If a <span class="ScmSym">fun</span> or a <span class="ScmSym">with</span> expression has duplicate identifiers, we consider it a syntax error.
Therefore, such errors must be detected in <span class="ScmSym">parse</span>. For example, parsing the following expressions must signal errors:
</div><div class="SIntrapara"><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">with</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmPn">[</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmVal">10</span><span class="ScmPn">]</span><span class="hspace">&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmVal">20</span><span class="ScmPn">]</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmVal">50</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym">fun</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmVal">10</span><span class="ScmPn">)</span></td></tr></table></div></p><h5>2.8.2.2<tt>&nbsp;</tt><a name="(part._cfwae._.Template)"></a>Template</h5><p>Your code <span style="font-weight: bold">must</span> adhere to the following template, without any changes:</p><p><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">Binding</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">binding</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">named-expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">num</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">binop</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">op</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="ScmValLink" pltdoc="x">procedure?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lhs</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">rhs</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">with</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lob</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">Binding?</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">id</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">if0</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">c</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">t</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">e</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">fun</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">args</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">app</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">args</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">Env</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">mtEnv</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">anEnv</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">value</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE-Value?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">Env?</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">closureV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">params</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">Env?</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">parse : expression -&gt; CFWAE</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">This procedure parses an expression into a CFWAE</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">parse</span><span class="hspace">&nbsp;</span><span class="ScmSym">sexp</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmSym">....</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">interp : CFWAE Env -&gt; CFWAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">This procedure interprets the given CFWAE in the environment</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">and produces a result in the form of a CFWAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmSym">....</span><span class="ScmPn">)</span></td></tr></table></p><h5>2.8.2.3<tt>&nbsp;</tt><a name="(part._cfwae._.Conditionals)"></a>Conditionals</h5><p>The semantics of <span class="ScmPn">(</span><span class="ScmSym">if0</span><span class="stt"> </span><span class="ScmSym"><a href="index.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test))" class="ScmValLink" pltdoc="x">test</a></span><span class="stt"> </span><span class="ScmSym">then</span><span class="stt"> </span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span><span class="ScmPn">)</span> is: if the <span class="ScmSym"><a href="index.html#(def._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test))" class="ScmValLink" pltdoc="x">test</a></span> evalutes to zero, then the entire expression evalutes
to the result of <span class="ScmSym">then</span>, otherwise, it evalautes to <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/if.html#(form._((lib._scheme%2Fprivate%2Fletstx-scheme..ss)._else))" class="ScmStxLink" pltdoc="x">else</a></span>. Evaluation should signal an error for non-numeric test values.</p><p>You will find the Scheme function <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._zero~3f))" class="ScmValLink" pltdoc="x">zero?</a></span> useful in <span class="ScmSym">interp.</span></p><h5>2.8.2.4<tt>&nbsp;</tt><a name="(part._cfwae._.Multi-argument_fun)"></a>Multi-argument <span class="ScmSym">fun</span></h5><p>Extend the <span class="ScmSym">fun</span> language feature described in lecture so that functions can accept a list of zero or more arguments instead
of just one. All arguments to the function must evaluate with the <span style="font-style: italic">same deferred substitutions</span>. An example of a multi-argument fun:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmPn">(</span><span class="ScmSym">fun</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmSym">y</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._*))" class="ScmValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">x</span><span class="hspace">&nbsp;</span><span class="ScmSym">y</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmVal">2</span><span class="hspace">&nbsp;</span><span class="ScmVal">3</span><span class="ScmPn">)</span></p><p>This evaluates to <span class="ScmVal">6</span>.</p><p>As you did for multi-armed <span class="ScmSym">with</span>, you must ensure that the arguments to a function have distinct names.</p><p>You will want to write a function called <span class="ScmSym">extend-Env</span> that extends an environment (via <span class="ScmSym">anEnv</span>) many times for each
binding it is given.</p><h5>2.8.2.5<tt>&nbsp;</tt><a name="(part._cfwae._.Tests)"></a>Tests</h5><p>Your parser and interpreter must detect errors and explicitly signal them by calling <span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/exns.html#(def._((quote._~23~25kernel)._error))" class="ScmValLink" pltdoc="x">error</a></span>.
We will consider an error raised internally by Scheme to be a bug in your code.</p><p>For example, Scheme signals a &ldquo;divide by zero&rdquo; error if you attempt to evaluate <span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._%2F))" class="ScmValLink" pltdoc="x">/</a></span><span class="stt"> </span><span class="ScmVal">1</span><span class="stt"> </span><span class="ScmVal">0</span><span class="ScmPn">)</span>. Since we use Scheme&rsquo;s division
function to implement division in CFWAE, you may be tempted to leave it to Scheme to signal division by zero errors for you.
However, you must signal the error yourself by explicitly testing for division by zero before calling Scheme&rsquo;s division procedure.</p><p>If you are not sure if an error raised by your program constitutes a bug, search the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Help Desk</span> for <span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test/exn))" class="ScmStxLink" pltdoc="x">test/exn</a></span>.
<span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._test/exn))" class="ScmStxLink" pltdoc="x">test/exn</a></span> tests for errors, but only succeeds on errors that you explicitly signal.</p><p>You should have <span class="ScmSym">parse</span> tests for all allowable syntactic forms: including syntax that results in errors when run.
You should also include <span class="ScmSym">parse</span> tests that find all erroneous forms of syntax.</p><p>You should have <span class="ScmSym">interp</span> tests that demonstrate you recreate the behavior of substitution from <a href="rinterp.html" pltdoc="x">Rudimentary Interpreter</a>,
in addition to new tests to demonstrate correct (and erroneous) usage of <span class="ScmSym">if0</span>, function definition, and function application.</p><h5>2.8.3<tt>&nbsp;</tt><a name="(part._cfwae-lazy._.C.F.W.A.E__.Lazy_)"></a>CFWAE (Lazy)</h5><p><span style="font-style: italic">You must submit this in a file named <span class="stt">"xinterp-lazy.ss"</span>.</span></p><p>Copy your CFWAE interpreter into a file named <span class="stt">"xinterp-lazy.ss"</span> and modify it so that it has lazy application semantics.
(We strongly recommend that you not attempt this part of the assignment until you&#8217;ve gotten the first interpreter done,
    thoroughly tested, and debugged!)</p><h5>2.8.3.1<tt>&nbsp;</tt><a name="(part._cfwae-lazy._.Template)"></a>Template</h5><p>Your code <span style="font-weight: bold">must</span> adhere to the following template, without any changes:</p><p><table cellspacing="0" class="ScmBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">Binding</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">binding</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">named-expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">num</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">binop</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">op</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="ScmValLink" pltdoc="x">procedure?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lhs</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">rhs</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">with</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">lob</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">Binding?</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">id</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">if0</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">c</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">t</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">e</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">fun</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">args</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">app</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">f</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">args</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">Env</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">mtEnv</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">anEnv</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">name</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">value</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE-Value?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">Env?</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="index.html#(form._(/.Users/jay/.Dev/svn/jay/.Projects/courses/2009/fall/330/plai..ss._define-type))" class="ScmStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">numV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">n</span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/numbers.html#(def._((quote._~23~25kernel)._number~3f))" class="ScmValLink" pltdoc="x">number?</a></span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">closureV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">params</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/Data-structure_Contracts.html#(def._((lib._scheme%2Fcontract%2Fprivate%2Fmisc..ss)._listof))" class="ScmValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="ScmValLink" pltdoc="x">symbol?</a></span><span class="ScmPn">)</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">body</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">Env?</span><span class="ScmPn">)</span><span class="ScmPn">]</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmPn">[</span><span class="ScmSym">exprV</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">CFWAE?</span><span class="ScmPn">)</span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">env</span><span class="hspace">&nbsp;</span><span class="ScmSym">Env?</span><span class="ScmPn">)</span><span class="ScmPn">]</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">parse : expression -&gt; CFWAE</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">This procedure parses an expression into a CFWAE</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">parse</span><span class="hspace">&nbsp;</span><span class="ScmSym">sexp</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmSym">....</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">interp : CFWAE Env -&gt; CFWAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">This procedure interprets the given CFWAE in the environment</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmCmt">;</span><span class="ScmCmt">&nbsp;</span><span class="ScmCmt">and produces a result in the form of a CFWAE-Value</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="ScmPn">(</span><span class="ScmSym"><a href="http://docs.plt-scheme.org/reference/define.html#(form._((lib._scheme%2Fbase..ss)._define))" class="ScmStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="ScmPn">(</span><span class="ScmSym">interp</span><span class="hspace">&nbsp;</span><span class="ScmSym">expr</span><span class="hspace">&nbsp;</span><span class="ScmSym">env</span><span class="ScmPn">)</span></td></tr><tr><td><span class="ScmPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="ScmSym">....</span><span class="ScmPn">)</span></td></tr></table></p><h5>2.8.3.2<tt>&nbsp;</tt><a name="(part._cfwae-lazy._.Tests)"></a>Tests</h5><p>You should be able to run all the tests from <span class="stt">"xinterp.ss"</span>.
It is considered a &ldquo;special&rdquo; test case to show that your code is lazy.
There are two good ways to do this. You will get points for both.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="wsubst.html" title="backward to &quot;2.7 Substitution&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;2 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="lazy.html" title="forward to &quot;2.9 Laziness and Infinite Data&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>