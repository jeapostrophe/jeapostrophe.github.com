<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>3.20&nbsp;Type Inference</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="course.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Programming Language Design (Fall 2011)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#(part._.Lectures)" class="tocviewlink" pltdoc="x">Lectures</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewselflink" pltdoc="x">Assignments</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#(part._.Help)" class="tocviewlink" pltdoc="x">Help</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#(part._turnin)" class="tocviewlink" pltdoc="x">Turn In Policy</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#(part._.Readings)" class="tocviewlink" pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#(part._software)" class="tocviewlink" pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#(part._.Exams)" class="tocviewlink" pltdoc="x">Exams</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="index.html#(part._.Grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="index.html#(part._.Your_.Final_.Grade)" class="tocviewlink" pltdoc="x">Your Final Grade</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="index.html#(part._.Team_.Work)" class="tocviewlink" pltdoc="x">Team Work</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="index.html#(part._.Codewalks)" class="tocviewlink" pltdoc="x">Codewalks</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="index.html#(part._.Advice)" class="tocviewlink" pltdoc="x">Advice</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewlink" pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="survey.html" class="tocviewlink" pltdoc="x">Survey</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="basic.html" class="tocviewlink" pltdoc="x">Basic Racket</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="music.html" class="tocviewlink" pltdoc="x">Musical Notation</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="lists.html" class="tocviewlink" pltdoc="x">Lists and Trees</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="hof.html" class="tocviewlink" pltdoc="x">Higher-<wbr></wbr>order Functions</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="rinterp.html" class="tocviewlink" pltdoc="x">Rudimentary Interpreter</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="wsubst.html" class="tocviewlink" pltdoc="x">Substitution</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="xinterp.html" class="tocviewlink" pltdoc="x">Extended Interpreter</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="lazy.html" class="tocviewlink" pltdoc="x">Laziness and Infinite Data</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="wlazy.html" class="tocviewlink" pltdoc="x">Laziness</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="rawweb.html" class="tocviewlink" pltdoc="x">Raw Web Programming</a></td></tr><tr><td align="right">3.12&nbsp;</td><td><a href="wlang.html" class="tocviewlink" pltdoc="x">Language Design</a></td></tr><tr><td align="right">3.13&nbsp;</td><td><a href="wcont.html" class="tocviewlink" pltdoc="x">Continuations</a></td></tr><tr><td align="right">3.14&nbsp;</td><td><a href="pltweb.html" class="tocviewlink" pltdoc="x">Racket Web Programming</a></td></tr><tr><td align="right">3.15&nbsp;</td><td><a href="wgc.html" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">3.16&nbsp;</td><td><a href="gc.html" class="tocviewlink" pltdoc="x">Garbage Collectors</a></td></tr><tr><td align="right">3.17&nbsp;</td><td><a href="wtypec.html" class="tocviewlink" pltdoc="x">Type Checking</a></td></tr><tr><td align="right">3.18&nbsp;</td><td><a href="typec.html" class="tocviewlink" pltdoc="x">Type Checker</a></td></tr><tr><td align="right">3.19&nbsp;</td><td><a href="typei.html" class="tocviewlink" pltdoc="x">Type Inferrer</a></td></tr><tr><td align="right">3.20&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">3.21&nbsp;</td><td><a href="prolog.html" class="tocviewlink" pltdoc="x">Prolog</a></td></tr><tr><td align="right">3.22&nbsp;</td><td><a href="final.html" class="tocviewlink" pltdoc="x">Final</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>3.20&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Type Inference</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.20.1&nbsp;</td><td><a href="#(part._.Constraint_.Generation_and_.Satisfaction)" class="tocviewlink" pltdoc="x">Constraint Generation and Satisfaction</a></td></tr><tr><td align="right">3.20.2&nbsp;</td><td><a href="#(part._.Type_.Inference)" class="tocviewlink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">3.20.3&nbsp;</td><td><a href="#(part._wtypei-app)" class="tocviewlink" pltdoc="x">Application</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.20.1<tt>&nbsp;</tt></span><a href="#(part._.Constraint_.Generation_and_.Satisfaction)" class="tocsubseclink" pltdoc="x">Constraint Generation and Satisfaction</a></td></tr><tr><td><span class="tocsublinknumber">3.20.2<tt>&nbsp;</tt></span><a href="#(part._.Type_.Inference)" class="tocsubseclink" pltdoc="x">Type Inference</a></td></tr><tr><td><span class="tocsublinknumber">3.20.3<tt>&nbsp;</tt></span><a href="#(part._wtypei-app)" class="tocsubseclink" pltdoc="x">Application</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="typei.html" title="backward to &quot;3.19 Type Inferrer&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;3 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="prolog.html" title="forward to &quot;3.21 Prolog&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.20<tt>&nbsp;</tt><a name="(part._wtypei)"></a>Type Inference</h4><p><span style="font-style: italic">Complete this assignment with Team Three.</span></p><p><span style="font-style: italic">You <span style="font-weight: bold">must</span> submit this in an archive named <span class="stt">"wtypei.zip"</span>.

This archive <span style="font-weight: bold">must</span> contain a folder named <span class="stt">"wtypei"</span>.

This folder <span style="font-weight: bold">must</span> contain all the files specified below.

You <span style="font-weight: bold">must</span> attach <span class="stt">"wtypei.zip"</span> to an email whose subject is "BYU - Fall 2011 - CS 330 - wtypei" and whose message body contains the name of everyone on your team (each on a separate line.)

You <span style="font-weight: bold">must</span> send this email to <a href="mailto:jay@cs.byu.edu">jay@cs.byu.edu</a> before 5pm (Provo time) on 12/1.

<span style="font-weight: bold">Ensure</span> that what you are satisfied with what you submit, because only your chronologically first submission will be graded.

<span style="font-weight: bold">Ensure</span> that you follow these instructions <span style="font-weight: bold">exactly</span>, since submissions that do not meet these requirements (i.e. do not have the correct format) will receive <span style="font-weight: bold">no credit</span>, despite the time and energy you put into the assignment.

Please see <a href="index.html#(part._turnin)" pltdoc="x">Turn In Policy</a> for more information.
</span></p><p><span style="font-style: italic">You <span style="font-weight: bold">must</span> submit this in a file named <span class="stt">"wtypei.pdf"</span>.</span></p><h5>3.20.1<tt>&nbsp;</tt><a name="(part._.Constraint_.Generation_and_.Satisfaction)"></a>Constraint Generation and Satisfaction</h5><p><div class="SIntrapara">Consider the program:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._%2B))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._first))" class="RktValLink" pltdoc="x">first</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/booleans.html#(def._((lib._racket%2Fbool..rkt)._true))" class="RktValLink" pltdoc="x">true</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((lib._racket%2Flist..rkt)._empty))" class="RktValLink" pltdoc="x">empty</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">This program has a type error.</div></p><p>Generate constraints for this program. Isolate the smallest set of these constraints that, solved together, identify the type error.</p><p>Feel free to label the sub-expressions above with superscripts for use when writing and solving constraints.</p><h5>3.20.2<tt>&nbsp;</tt><a name="(part._.Type_.Inference)"></a>Type Inference</h5><p><div class="SIntrapara">Consider the following typed expression:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">{</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">B1</span><span class="RktPn">}</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">B2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">{</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">B3</span><span class="RktPn">}</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">B4</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">{</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">B5</span><span class="RktPn">}</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">B6</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">{</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span></td></tr></table></blockquote></div><div class="SIntrapara">We have left the types unspecified (Bn) to be filled in by the type inference process. Derive type constraints from the above program.
Then solve these constraints. From these solutions, fill in the values of the boxes. Be sure to show all the steps specified by the
algorithms (i.e., writing the answer based on intuition or knowledge is insufficient). You should use type variables where necessary.
To save writing, you can annotate each expression with an appropriate type variable, and present the rest of the algorithm in terms of
these type variables alone (to avoid having to copy the corresponding expressions). If you do this, be sure to annotate every sub-expression
with a type variable. Be sure the annotations are clearly readable!</div></p><h5>3.20.3<tt>&nbsp;</tt><a name="(part._wtypei-app)"></a>Application</h5><p>In 850 words or less, describe if and how your knowledge of type inference will help you in your future programming practice.
Good answers might discuss how this concept can be applied in interesting programming environments or how knowledge of its subtleties
clarifies or improves existing practices, techniques, tools, etc.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="typei.html" title="backward to &quot;3.19 Type Inferrer&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;3 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="prolog.html" title="forward to &quot;3.21 Prolog&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>