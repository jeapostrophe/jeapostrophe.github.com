<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3.9&nbsp;UNIX Processes</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><link rel="stylesheet" type="text/css" href="course.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Computer Architecture (Fall 2015)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#%28part._.Lectures%29" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#%28part._assignments%29" class="tocviewselflink" data-pltdoc="x">Assignments</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#%28part._turnin%29" class="tocviewlink" data-pltdoc="x">Turn-<wbr></wbr>In and Grading</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#%28part._.Help%29" class="tocviewlink" data-pltdoc="x">Help</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#%28part._.Readings%29" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#%28part._software%29" class="tocviewlink" data-pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#%28part._.Fine_.Print%29" class="tocviewlink" data-pltdoc="x">Fine Print</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="index.html#%28part._assignments%29" class="tocviewlink" data-pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="a1.html" class="tocviewlink" data-pltdoc="x">Floating Point Representation</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="a2.html" class="tocviewlink" data-pltdoc="x">DIY Floating Point Addition</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="a3.html" class="tocviewlink" data-pltdoc="x">MIC-<wbr></wbr>1 Fibonacci</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="exam1.html" class="tocviewlink" data-pltdoc="x">Exam 1</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="a4.html" class="tocviewlink" data-pltdoc="x">MIC-<wbr></wbr>1 Microcode Extension</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="a5.html" class="tocviewlink" data-pltdoc="x">MIC-<wbr></wbr>1 Calculator</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="exam2.html" class="tocviewlink" data-pltdoc="x">Exam 2</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="a6.html" class="tocviewlink" data-pltdoc="x">MIC-<wbr></wbr>1 Linker</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">UNIX Processes</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="e1.html" class="tocviewlink" data-pltdoc="x">Cache Simulator</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="final.html" class="tocviewlink" data-pltdoc="x">Final</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="a6.html" title="backward to &quot;3.8 MIC-1 Linker&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#%28part._assignments%29" title="up to &quot;3 Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="e1.html" title="forward to &quot;3.10 Cache Simulator&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.9<tt>&nbsp;</tt><a name="(part._a7)"></a>UNIX Processes</h4><p>In C, write a program that spawns a child process, does inter-process
communication, and displays process information.</p><p><div class="SIntrapara">Each line of output of your parent process must be prefixed with
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">PARENT:</span><span class="hspace">&nbsp;</span></span>. Each line of output of your child process must be
prefixed with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">CHILD:</span><span class="hspace">&nbsp;</span></span>. Prior to each step, your program must
output an information line formatted as follows:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">About to perform step #.</span></p></td></tr></table></div></p><p><div class="SIntrapara">Your parent program must:
</div><div class="SIntrapara"><ul><li><p>Display a <a href="#%28tech._process._information._report%29" class="techoutside" data-pltdoc="x"><span class="techinside">process information report</span></a>.</p></li><li><p>Create a unnamed pipe, using <span class="RktSym">pipe</span><span class="RktMeta"></span>.</p></li><li><p>Spawn a child process that inherits the pipe, using <span class="RktSym">fork</span><span class="RktMeta"></span>.</p></li><li><p>Write a string to the pipe.</p></li><li><p>Exit with success.</p></li></ul></div></p><p><div class="SIntrapara">Your child program must:
</div><div class="SIntrapara"><ul><li><p>Display a <a href="#%28tech._process._information._report%29" class="techoutside" data-pltdoc="x"><span class="techinside">process information report</span></a>.</p></li><li><p>Read the parent&rsquo;s string from the pipe and display it.</p></li><li><p>Get its parent process ID, using <span class="RktSym">getppid</span><span class="RktMeta"></span>, and display it.</p></li><li><p>Exit with success.</p></li></ul></div></p><p><div class="SIntrapara">The <a name="(tech._process._information._report)"></a><span style="font-style: italic">process information report</span> must be in the following
format:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="stt">Process ID is:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">15550</span></p></td></tr><tr><td><p><span class="stt">Process parent ID is:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">26778</span></p></td></tr><tr><td><p><span class="stt">Real UID is:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1004</span></p></td></tr><tr><td><p><span class="stt">Real GID is:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">4000</span></p></td></tr><tr><td><p><span class="stt">Effective UID is:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1004</span></p></td></tr><tr><td><p><span class="stt">Effective GID is:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">4000</span></p></td></tr><tr><td><p><span class="stt">Process priority is:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">0</span></p></td></tr></table></div></p><p>This information comes from <span class="RktSym">getpid</span><span class="RktMeta"></span>, <span class="RktSym">getppid</span><span class="RktMeta"></span>,
<span class="RktSym">getuid</span><span class="RktMeta"></span>, <span class="RktSym">getgid</span><span class="RktMeta"></span>, <span class="RktSym">geteuid</span><span class="RktMeta"></span>, <span class="RktSym">getegid</span><span class="RktMeta"></span>, and
<span class="RktSym">getpriority</span><span class="RktMeta"></span>.</p><p>Your program should have no other output.</p><p><div class="SIntrapara">You must turn in
</div><div class="SIntrapara"><ul><li><p>A <span class="RktSym">README</span><span class="RktMeta"></span> file that contains a short write-up of your
project. It should discuss the approach you took to solving the
problem, it should discuss any problems or issues that still remain,
it should discuss any interesting things that you learned in the
course of the project. Finally, it should provide the grade you
believe the project deserves with a detailed explanation of why. This
explanation should almost certainly focus on why you believe the
program is correct.</p><p>This file must be in plain-text. If you need formatting, use
Markdown. It must be limited to 80 characters wide, unless you are
quoting program output.</p></li><li><p>Your source code, named <span class="RktSym">a7.c</span><span class="RktMeta"></span>.</p></li><li><p>A test output file, named <span class="RktSym">test.out</span><span class="RktMeta"></span>, that contains the
expected output.</p></li><li><p>A <span class="RktSym">Makefile</span><span class="RktMeta"></span> that first builds the program and then tests
it by running it and compares the actual output to
<span class="RktSym">test.out</span><span class="RktMeta"></span>. You should not be able to predict the PIDs, so
<span class="RktSym">diff</span><span class="RktMeta"></span> should report a few lines different.</p></li></ul></div></p><p>This assignment will be graded based on its correctness and your
ability to articulate why it is correct.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="a6.html" title="backward to &quot;3.8 MIC-1 Linker&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#%28part._assignments%29" title="up to &quot;3 Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="e1.html" title="forward to &quot;3.10 Cache Simulator&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>