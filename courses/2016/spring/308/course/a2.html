<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3.2&nbsp;Interprocess Communication</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><link rel="stylesheet" type="text/css" href="course.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Operating Systems (Spring 2016)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#%28part._.Introduction%29" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#%28part._.Lectures%29" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#%28part._assignments%29" class="tocviewselflink" data-pltdoc="x">Assignments</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#%28part._turnin%29" class="tocviewlink" data-pltdoc="x">Turn-<wbr></wbr>In and Grading</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#%28part._.Help%29" class="tocviewlink" data-pltdoc="x">Help</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#%28part._.Readings%29" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#%28part._software%29" class="tocviewlink" data-pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#%28part._.Fine_.Print%29" class="tocviewlink" data-pltdoc="x">Fine Print</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="index.html#%28part._assignments%29" class="tocviewlink" data-pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="a1.html" class="tocviewlink" data-pltdoc="x">Basic Processes</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Interprocess Communication</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="exam1.html" class="tocviewlink" data-pltdoc="x">Exam 1</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="a3.html" class="tocviewlink" data-pltdoc="x">Time to Make the Donuts</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="a4.html" class="tocviewlink" data-pltdoc="x">World Donutination</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="exam2.html" class="tocviewlink" data-pltdoc="x">Exam 2</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="a5.html" class="tocviewlink" data-pltdoc="x">Memory Management Simulator</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="a6.html" class="tocviewlink" data-pltdoc="x"><span class="RktSym">ls</span><span class="RktMeta"></span></a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="e1.html" class="tocviewlink" data-pltdoc="x">Extra Credit:<span class="mywbr"> &nbsp;</span> Mc<span class="mywbr"> &nbsp;</span>DOS</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="final.html" class="tocviewlink" data-pltdoc="x">Final</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="a1.html" title="backward to &quot;3.1 Basic Processes&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#%28part._assignments%29" title="up to &quot;3 Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="exam1.html" title="forward to &quot;3.3 Exam 1&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.2<tt>&nbsp;</tt><a name="(part._a2)"></a>Interprocess Communication</h4><p>In C using UNIX system calls, write a program that demonstrates using
standard UNIX tools to accomplish small tasks. This program will
demonstrate the essence of the redirection the UNIX shell provides.</p><p>Your program will have two modes: <a href="#%28tech._sort._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">sort mode</span></a> and <a href="#%28tech._grep._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">grep
mode</span></a>. Your program should use its first command-line argument to
determine which mode it runs in: <span class="RktInBG"><span class="hspace"></span><span class="RktIn">sort</span><span class="hspace"></span></span> for <a href="#%28tech._sort._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">sort mode</span></a>
and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">grep</span><span class="hspace"></span></span> for <a href="#%28tech._grep._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">grep mode</span></a>.</p><p>In each mode, your program will (1) create two nameless pipes, (2)
create a child process, (3) perform channel management such that the
child&rsquo;s output goes to one pipe and its input comes from the other
pipe, (4) execute a standard UNIX command in the child, (5) use the
parent to analyze the results, and (6) exit with success when the
child finishes writing to its output (which occurs when the child
exits.)</p><p>In <a name="(tech._sort._mode)"></a><span style="font-style: italic">sort mode</span>, your program should use the second
command-line argument as the name of a file. This file consists of any
number of <a href="#%28tech._phone._record%29" class="techoutside" data-pltdoc="x"><span class="techinside">phone record</span></a>s separated by newlines (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">\n</span><span class="hspace"></span></span>). A
<a name="(tech._phone._record)"></a><span style="font-style: italic">phone record</span> has the form <span class="RktInBG"><span class="hspace"></span><span class="RktIn">LAST FIRST AREA NUM3 NUM4</span><span class="hspace"></span></span>, where each field does not contain spaces and all fields after
and including <span class="RktInBG"><span class="hspace"></span><span class="RktIn">AREA</span><span class="hspace"></span></span> are only ASCII numeric digits. Your
parent should read this file and write each line to the child&rsquo;s
input. Your child should <span class="RktSym">exec</span><span class="RktMeta"></span> the <span class="RktSym">sort</span><span class="RktMeta"></span> command so
that the data is sorted first by the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">AREA</span><span class="hspace"></span></span> field and then by
the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">LAST</span><span class="hspace"></span></span> field. Your parent should analyze the output of the
child and one <a href="#%28tech._summary._line%29" class="techoutside" data-pltdoc="x"><span class="techinside">summary line</span></a> for every unique <span class="RktInBG"><span class="hspace"></span><span class="RktIn">AREA</span><span class="hspace"></span></span>
value, separated by newlines (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">\n</span><span class="hspace"></span></span>). A <a name="(tech._summary._line)"></a><span style="font-style: italic">summary line</span>
has the form <span class="RktInBG"><span class="hspace"></span><span class="RktIn">AREA COUNT</span><span class="hspace"></span></span> where <span class="RktInBG"><span class="hspace"></span><span class="RktIn">COUNT</span><span class="hspace"></span></span> is the ASCII
representation of the number of <a href="#%28tech._phone._record%29" class="techoutside" data-pltdoc="x"><span class="techinside">phone record</span></a>s with that
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">AREA</span><span class="hspace"></span></span> value.</p><p>In <a name="(tech._grep._mode)"></a><span style="font-style: italic">grep mode</span>, your program should use the second
command-line argument as the name of a file. Your parent should read
this file and write each line to the child&rsquo;s input. Your child should
<span class="RktSym">exec</span><span class="RktMeta"></span> the <span class="RktSym">grep</span><span class="RktMeta"></span> command so that only lines with
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">123</span><span class="hspace"></span></span> in them are printed. Your parent must print out the
number of lines that the child prints back.</p><p>Your program should have no other output than mentioned above.</p><p>Your repository must contain the following files:</p><ul><li><p>A <span class="RktSym">README</span><span class="RktMeta"></span> file that contains a short write-up of your
project. It should discuss the approach you took to solving the
problem, it should discuss any problems or issues that still remain,
it should discuss any interesting things that you learned in the
course of the project. Finally, it should provide the grade you
believe the project deserves with a detailed explanation of why. This
explanation should almost certainly focus on why you believe the
program is correct.</p><p>Your <span class="RktSym">README</span><span class="RktMeta"></span> must comment on the timing of the various tests.</p><p>This file must be in plain-text. If you need formatting, use
Markdown. It must be limited to 80 characters wide, unless you are
quoting program output.</p></li><li><p>Your source code, named <span class="RktSym">a2.c</span><span class="RktMeta"></span>.</p></li><li><p>Three <a href="#%28tech._sort._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">sort mode</span></a> test input files, named
<span class="RktSym">tiny.sort.in</span><span class="RktMeta"></span> (containing a few records),
<span class="RktSym">medium.sort.in</span><span class="RktMeta"></span> (containing a 32K of records),
<span class="RktSym">huge.sort.in</span><span class="RktMeta"></span> (containing a 8M of records), that contain input
for <a href="#%28tech._sort._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">sort mode</span></a>.</p></li><li><p>Three <a href="#%28tech._sort._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">sort mode</span></a> test output files, named
<span class="RktSym">tiny.sort.out</span><span class="RktMeta"></span>, <span class="RktSym">medium.sort.out</span><span class="RktMeta"></span>, <span class="RktSym">huge.sort.out</span><span class="RktMeta"></span>,
that contains the expected output for the <a href="#%28tech._sort._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">sort mode</span></a> tests.</p></li><li><p>Three <a href="#%28tech._grep._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">grep mode</span></a> test input files, named
<span class="RktSym">tiny.grep.in</span><span class="RktMeta"></span> (containing a few lines),
<span class="RktSym">medium.grep.in</span><span class="RktMeta"></span> (containing a 32K of lines),
<span class="RktSym">huge.grep.in</span><span class="RktMeta"></span> (containing a 8M of lines), that contain input
for <a href="#%28tech._grep._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">grep mode</span></a>.</p></li><li><p>Three <a href="#%28tech._grep._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">grep mode</span></a> test output files, named
<span class="RktSym">tiny.grep.out</span><span class="RktMeta"></span>, <span class="RktSym">medium.grep.out</span><span class="RktMeta"></span>, <span class="RktSym">huge.grep.out</span><span class="RktMeta"></span>,
that contains the expected output for the <a href="#%28tech._grep._mode%29" class="techoutside" data-pltdoc="x"><span class="techinside">grep mode</span></a> tests.</p></li><li><p>A <span class="RktSym">Makefile</span><span class="RktMeta"></span> that first builds the program and then tests
it by running it in each mode with the appropriate test input and
compares the actual output to appropriate test output. The
<span class="RktSym">Makefile</span><span class="RktMeta"></span> should time your program.</p></li></ul><p>This assignment will be graded based on its correctness and your
ability to articulate why it is correct.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="a1.html" title="backward to &quot;3.1 Basic Processes&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#%28part._assignments%29" title="up to &quot;3 Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="exam1.html" title="forward to &quot;3.3 Exam 1&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>