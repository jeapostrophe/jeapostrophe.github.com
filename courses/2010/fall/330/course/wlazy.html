<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>3.10&nbsp;Laziness</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="course.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Programming Language Design (Fall 2010)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#(part._.Lectures)" class="tocviewlink" pltdoc="x">Lectures</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewselflink" pltdoc="x">Assignments</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#(part._.Help)" class="tocviewlink" pltdoc="x">Help</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#(part._turnin)" class="tocviewlink" pltdoc="x">Turn In Policy</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#(part._.Readings)" class="tocviewlink" pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#(part._software)" class="tocviewlink" pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#(part._.Exams)" class="tocviewlink" pltdoc="x">Exams</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="index.html#(part._.Grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="index.html#(part._.Your_.Final_.Grade)" class="tocviewlink" pltdoc="x">Your Final Grade</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="index.html#(part._.Team_.Work)" class="tocviewlink" pltdoc="x">Team Work</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="index.html#(part._.Codewalks)" class="tocviewlink" pltdoc="x">Codewalks</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="index.html#(part._.Advice)" class="tocviewlink" pltdoc="x">Advice</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewlink" pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="music.html" class="tocviewlink" pltdoc="x">Musical Notation</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="survey.html" class="tocviewlink" pltdoc="x">Survey</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="basic.html" class="tocviewlink" pltdoc="x">Basic Racket</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="lists.html" class="tocviewlink" pltdoc="x">Lists and Trees</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="hof.html" class="tocviewlink" pltdoc="x">Higher-<wbr></wbr>order Functions</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="rinterp.html" class="tocviewlink" pltdoc="x">Rudimentary Interpreter</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="wsubst.html" class="tocviewlink" pltdoc="x">Substitution</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="xinterp.html" class="tocviewlink" pltdoc="x">Extended Interpreter</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="lazy.html" class="tocviewlink" pltdoc="x">Laziness and Infinite Data</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Laziness</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="rawweb.html" class="tocviewlink" pltdoc="x">Raw Web Programming</a></td></tr><tr><td align="right">3.12&nbsp;</td><td><a href="wlang.html" class="tocviewlink" pltdoc="x">Language Design</a></td></tr><tr><td align="right">3.13&nbsp;</td><td><a href="wcont.html" class="tocviewlink" pltdoc="x">Continuations</a></td></tr><tr><td align="right">3.14&nbsp;</td><td><a href="pltweb.html" class="tocviewlink" pltdoc="x">Racket Web Programming</a></td></tr><tr><td align="right">3.15&nbsp;</td><td><a href="gc.html" class="tocviewlink" pltdoc="x">Garbage Collectors</a></td></tr><tr><td align="right">3.16&nbsp;</td><td><a href="wgc.html" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">3.17&nbsp;</td><td><a href="wtypec.html" class="tocviewlink" pltdoc="x">Type Checking</a></td></tr><tr><td align="right">3.18&nbsp;</td><td><a href="typec.html" class="tocviewlink" pltdoc="x">Type Checker</a></td></tr><tr><td align="right">3.19&nbsp;</td><td><a href="typei.html" class="tocviewlink" pltdoc="x">Type Inferrer</a></td></tr><tr><td align="right">3.20&nbsp;</td><td><a href="wtypei.html" class="tocviewlink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">3.21&nbsp;</td><td><a href="typei2.html" class="tocviewlink" pltdoc="x">Type Inferrer (Part Deux)</a></td></tr><tr><td align="right">3.22&nbsp;</td><td><a href="final.html" class="tocviewlink" pltdoc="x">Final</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>3.10&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Laziness</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.10.1&nbsp;</td><td><a href="#(part._.Java)" class="tocviewlink" pltdoc="x">Java</a></td></tr><tr><td align="right">3.10.2&nbsp;</td><td><a href="#(part._.Stricness_.Points)" class="tocviewlink" pltdoc="x">Stricness Points</a></td></tr><tr><td align="right">3.10.3&nbsp;</td><td><a href="#(part._.State)" class="tocviewlink" pltdoc="x">State</a></td></tr><tr><td align="right">3.10.4&nbsp;</td><td><a href="#(part._wlazy-app)" class="tocviewlink" pltdoc="x">Application</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.10.1<tt>&nbsp;</tt></span><a href="#(part._.Java)" class="tocsubseclink" pltdoc="x">Java</a></td></tr><tr><td><span class="tocsublinknumber">3.10.2<tt>&nbsp;</tt></span><a href="#(part._.Stricness_.Points)" class="tocsubseclink" pltdoc="x">Stricness Points</a></td></tr><tr><td><span class="tocsublinknumber">3.10.3<tt>&nbsp;</tt></span><a href="#(part._.State)" class="tocsubseclink" pltdoc="x">State</a></td></tr><tr><td><span class="tocsublinknumber">3.10.4<tt>&nbsp;</tt></span><a href="#(part._wlazy-app)" class="tocsubseclink" pltdoc="x">Application</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="lazy.html" title="backward to &quot;3.9 Laziness and Infinite Data&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;3 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="rawweb.html" title="forward to &quot;3.11 Raw Web Programming&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.10<tt>&nbsp;</tt><a name="(part._wlazy)"></a>Laziness</h4><p><span style="font-style: italic">Complete this assignment with Team One.</span></p><p><span style="font-style: italic">You <span style="font-weight: bold">must</span> submit this in an archive named <span class="stt">"wlazy.zip"</span>.

This archive <span style="font-weight: bold">must</span> contain a folder named <span class="stt">"wlazy"</span>.

This folder <span style="font-weight: bold">must</span> contain all the files specified below.

You <span style="font-weight: bold">must</span> attach <span class="stt">"wlazy.zip"</span> to an email whose subject is "BYU - Fall 2010 - CS 330 - wlazy" and whose message body contains the name of everyone on your team (each on a separate line.)

You <span style="font-weight: bold">must</span> send this email to <a href="mailto:jay@cs.byu.edu">jay@cs.byu.edu</a> before 5pm (Provo time) on 10/12.

<span style="font-weight: bold">Ensure</span> that what you are satisfied with what you submit, because only your chronologically first submission will be graded.

<span style="font-weight: bold">Ensure</span> that you follow these instructions <span style="font-weight: bold">exactly</span>, since submissions that do not meet these requirements (i.e. do not have the correct format) will receive <span style="font-weight: bold">no credit</span>, despite the time and energy you put into the assignment.

Please see <a href="index.html#(part._turnin)" pltdoc="x">Turn In Policy</a> for more information.
</span></p><p><span style="font-style: italic">You <span style="font-weight: bold">must</span> submit this in a file named <span class="stt">"wlazy.pdf"</span>.</span></p><h5>3.10.1<tt>&nbsp;</tt><a name="(part._.Java)"></a>Java</h5><p>Is Java eager or lazy? Write a Java program to determine the answer to this question. The same program, run under the two different regimes,
should produce different results. You may use any Java features you want, but keep your program relatively short; we will penalize you for
programs we consider excessively long or obfuscatory. (Tip: It&#8217;s possible to solve this problem with a program no more than a few dozen lines
long.)</p><p>You must turn in both the source code to your program (in printed or written form) as well as an answer to the question of whether Java is
eager or lazy, and an explanation of how your program determines this. That is, you should provide a brief and unambiguous answer
(e.g., &ldquo;Java is lazy.&rdquo;) followed by a description of what result one would obtain under each regime, along with a brief explanation
of why that regime would generate that result.</p><p>In general, it would be a good idea to discuss your plan of attack with the course staff. This will help you avoid falling into a trap
of measuring the wrong entity, and will improve your understanding of eagerness and laziness.</p><h5>3.10.2<tt>&nbsp;</tt><a name="(part._.Stricness_.Points)"></a>Stricness Points</h5><p><div class="SIntrapara">In our lazy interpreter, we identified three points in the language where we need to force evaluation of expression closures
(by invoking <span class="RktSym">strict</span>): the function position of an application, the test expression of a conditional, and arithmetic
primitives. Doug Oord, a fairly sedentary student, is rather taken with the idea of laziness. He suggests that we can reduce
the amount of code we need to write by replacing all invocations of <span class="RktSym">strict</span> with just one. In the lazy interpreter, he removes
all instances of <span class="RktSym">strict</span> and replaces
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">]</span></div><div class="SIntrapara">with
</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">strict</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lookup</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></div><div class="SIntrapara">Doug&rsquo;s reasoning is that the only time the interpreter returns an expression closure is on looking up an identifier in the environment.
If we force its evaluation right away, we can be sure no other part of the interpreter will get an expression closure, so removing those
other invocations of strict will do no harm. Being lazy himself, however, Doug fails to reason in the other direction, namely whether
this will result in an overly eager interpreter.</div></p><p>Is it possible to write a program that will produce different results under the original interpreter and Doug&rsquo;s
Let the interpreted language feature arithmetic, first-class functions, <span class="RktSym">with</span>, <span class="RktSym">if0</span>, and <span class="RktSym">rec</span>
(even though these are not in our in-class lazy interpreter).</p><p>If so, hand in an example program and the result under each interpreter, and clearly identify which interpreter will produce each
result. Be sure to compare this behavior against that of the lazy interpreter of the sort we&#8217;ve written in class.</p><p>If it&rsquo;s not possible, defend why one cannot exist.</p><h5>3.10.3<tt>&nbsp;</tt><a name="(part._.State)"></a>State</h5><p>No lazy language in history has also had state operations (such as mutating the values in boxes, or assigning values to variables). Why not?</p><p>The best answer to this question would include two things: a short program (which we assume will evaluate in a lazy regime) that uses state,
and a brief explanation of what problem the execution of this program illustrates. Please be sure to use the non-caching (ie, original)
notion of laziness. If you present a sufficiently illustrative example (which needn&#8217;t be very long!), your explanation can be quite short.</p><h5>3.10.4<tt>&nbsp;</tt><a name="(part._wlazy-app)"></a>Application</h5><p>In 850 words or less, describe if and how your knowledge of lazy evaluation will help you in your future programming practice.
Good answers might discuss how this concept can be applied in interesting programming environments or how knowledge of its subtleties
clarifies or improves existing practices, techniques, tools, etc.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="lazy.html" title="backward to &quot;3.9 Laziness and Infinite Data&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;3 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="rawweb.html" title="forward to &quot;3.11 Raw Web Programming&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>