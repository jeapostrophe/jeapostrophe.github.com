<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>3.7&nbsp;Substitution</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="course.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Programming Language Design (Fall 2010)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="index.html#(part._.Introduction)" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="index.html#(part._.Lectures)" class="tocviewlink" pltdoc="x">Lectures</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewselflink" pltdoc="x">Assignments</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="index.html#(part._.Help)" class="tocviewlink" pltdoc="x">Help</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="index.html#(part._turnin)" class="tocviewlink" pltdoc="x">Turn In Policy</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="index.html#(part._.Readings)" class="tocviewlink" pltdoc="x">Readings</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="index.html#(part._software)" class="tocviewlink" pltdoc="x">Software</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="index.html#(part._.Exams)" class="tocviewlink" pltdoc="x">Exams</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="index.html#(part._.Grading)" class="tocviewlink" pltdoc="x">Grading</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="index.html#(part._.Your_.Final_.Grade)" class="tocviewlink" pltdoc="x">Your Final Grade</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="index.html#(part._.Team_.Work)" class="tocviewlink" pltdoc="x">Team Work</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="index.html#(part._.Codewalks)" class="tocviewlink" pltdoc="x">Codewalks</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="index.html#(part._.Advice)" class="tocviewlink" pltdoc="x">Advice</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="index.html#(part._assignments)" class="tocviewlink" pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="music.html" class="tocviewlink" pltdoc="x">Musical Notation</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="survey.html" class="tocviewlink" pltdoc="x">Survey</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="basic.html" class="tocviewlink" pltdoc="x">Basic Racket</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="lists.html" class="tocviewlink" pltdoc="x">Lists and Trees</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="hof.html" class="tocviewlink" pltdoc="x">Higher-<wbr></wbr>order Functions</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="rinterp.html" class="tocviewlink" pltdoc="x">Rudimentary Interpreter</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Substitution</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="xinterp.html" class="tocviewlink" pltdoc="x">Extended Interpreter</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="lazy.html" class="tocviewlink" pltdoc="x">Laziness and Infinite Data</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="wlazy.html" class="tocviewlink" pltdoc="x">Laziness</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="rawweb.html" class="tocviewlink" pltdoc="x">Raw Web Programming</a></td></tr><tr><td align="right">3.12&nbsp;</td><td><a href="wlang.html" class="tocviewlink" pltdoc="x">Language Design</a></td></tr><tr><td align="right">3.13&nbsp;</td><td><a href="wcont.html" class="tocviewlink" pltdoc="x">Continuations</a></td></tr><tr><td align="right">3.14&nbsp;</td><td><a href="pltweb.html" class="tocviewlink" pltdoc="x">Racket Web Programming</a></td></tr><tr><td align="right">3.15&nbsp;</td><td><a href="gc.html" class="tocviewlink" pltdoc="x">Garbage Collectors</a></td></tr><tr><td align="right">3.16&nbsp;</td><td><a href="wgc.html" class="tocviewlink" pltdoc="x">Garbage Collection</a></td></tr><tr><td align="right">3.17&nbsp;</td><td><a href="wtypec.html" class="tocviewlink" pltdoc="x">Type Checking</a></td></tr><tr><td align="right">3.18&nbsp;</td><td><a href="typec.html" class="tocviewlink" pltdoc="x">Type Checker</a></td></tr><tr><td align="right">3.19&nbsp;</td><td><a href="typei.html" class="tocviewlink" pltdoc="x">Type Inferrer</a></td></tr><tr><td align="right">3.20&nbsp;</td><td><a href="wtypei.html" class="tocviewlink" pltdoc="x">Type Inference</a></td></tr><tr><td align="right">3.21&nbsp;</td><td><a href="typei2.html" class="tocviewlink" pltdoc="x">Type Inferrer (Part Deux)</a></td></tr><tr><td align="right">3.22&nbsp;</td><td><a href="final.html" class="tocviewlink" pltdoc="x">Final</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>3.7&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Substitution</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.7.1&nbsp;</td><td><a href="#(part._.Efficiency)" class="tocviewlink" pltdoc="x">Efficiency</a></td></tr><tr><td align="right">3.7.2&nbsp;</td><td><a href="#(part._.The_.Bitdiddle_.Algorithm)" class="tocviewlink" pltdoc="x">The Bitdiddle Algorithm</a></td></tr><tr><td align="right">3.7.3&nbsp;</td><td><a href="#(part._wsubst-app)" class="tocviewlink" pltdoc="x">Application</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.7.1<tt>&nbsp;</tt></span><a href="#(part._.Efficiency)" class="tocsubseclink" pltdoc="x">Efficiency</a></td></tr><tr><td><span class="tocsublinknumber">3.7.2<tt>&nbsp;</tt></span><a href="#(part._.The_.Bitdiddle_.Algorithm)" class="tocsubseclink" pltdoc="x">The Bitdiddle Algorithm</a></td></tr><tr><td><span class="tocsublinknumber">3.7.3<tt>&nbsp;</tt></span><a href="#(part._wsubst-app)" class="tocsubseclink" pltdoc="x">Application</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="rinterp.html" title="backward to &quot;3.6 Rudimentary Interpreter&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;3 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="xinterp.html" title="forward to &quot;3.8 Extended Interpreter&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.7<tt>&nbsp;</tt><a name="(part._wsubst)"></a>Substitution</h4><p><span style="font-style: italic">Complete this assignment with Team One.</span></p><p><span style="font-style: italic">You <span style="font-weight: bold">must</span> submit this in an archive named <span class="stt">"wsubst.zip"</span>.

This archive <span style="font-weight: bold">must</span> contain a folder named <span class="stt">"wsubst"</span>.

This folder <span style="font-weight: bold">must</span> contain all the files specified below.

You <span style="font-weight: bold">must</span> attach <span class="stt">"wsubst.zip"</span> to an email whose subject is "BYU - Fall 2010 - CS 330 - wsubst" and whose message body contains the name of everyone on your team (each on a separate line.)

You <span style="font-weight: bold">must</span> send this email to <a href="mailto:jay@cs.byu.edu">jay@cs.byu.edu</a> before 5pm (Provo time) on 9/28.

<span style="font-weight: bold">Ensure</span> that what you are satisfied with what you submit, because only your chronologically first submission will be graded.

<span style="font-weight: bold">Ensure</span> that you follow these instructions <span style="font-weight: bold">exactly</span>, since submissions that do not meet these requirements (i.e. do not have the correct format) will receive <span style="font-weight: bold">no credit</span>, despite the time and energy you put into the assignment.

Please see <a href="index.html#(part._turnin)" pltdoc="x">Turn In Policy</a> for more information.
</span></p><p><span style="font-style: italic">You <span style="font-weight: bold">must</span> submit this in a file named <span class="stt">"wsubst.pdf"</span>.</span></p><h5>3.7.1<tt>&nbsp;</tt><a name="(part._.Efficiency)"></a>Efficiency</h5><p>We have discussed how the definition of substitution results in an inefficient operator: in the worst case, it can take time at
least quadratic in the size of the program (where we can define the program size as the number of nodes in the abstract syntax tree).
We talked about deferring substitution using a cache. However, as we discussed in class, implementing the cache using a simple stack
of bindings doesn&rsquo;t seem very much more efficient.</p><p><div class="SIntrapara">Answer the following two questions.
</div><div class="SIntrapara"><ul><li><p>Provide a template for a program (similar in style to the one we saw in class for the
non-linearity of substitution) that illustrates the non-linearity of the stack-based cache implementation. (For example, you could give an
informal specification that can be used to generate a program for any number n.) Explain briefly why its execution time is non-linear in
its size.</p></li><li><p>Describe a data structure for a substitution cache that a FWAE interpreter can use to improve its complexity,
and show how the interpreter should use it (if the interpreter must change to accommodate your data structure, describe these changes
by providing a pseudocode version of the new interpreter). State the new complexity of the interpreter, and (informally but rigorously)
prove it. You don&rsquo;t need to restrict yourself to the subset of Racket we are using in this course; you may employ all your knowledge of,
say, Java. However, the responsibility for providing a clear enough description lies on you. Remember that simple code is often the
clearest description.</p></li></ul></div></p><h5>3.7.2<tt>&nbsp;</tt><a name="(part._.The_.Bitdiddle_.Algorithm)"></a>The Bitdiddle Algorithm</h5><p>The program</p><p><table cellspacing="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">{</span><span class="RktSym">with</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">}</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">{</span><span class="RktSym">with</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">y</span><span class="RktPn">}</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._%2B))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">{</span><span class="RktSym">with</span><span class="hspace">&nbsp;</span><span class="RktPn">{</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">}</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">{</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span><span class="RktPn">}</span></td></tr></table></p><p>should evaluate to <span class="RktVal">14</span> by static scoping. Evaluating <span class="RktSym">x</span> in the environment at the point of invoking <span class="RktSym">f</span>, however,
yields a value of <span class="RktVal">15</span> for the program. Ben Bitdiddle, a sharp if eccentric student, points out that we can still use the dynamic
environment, so long as we take the oldest value of <span class="RktSym">x</span> in the environment rather than the newest and for this example, he&rsquo;s right!</p><p>Is Ben right in general? If so, justify. If not, provide a counterexample program and explain why Ben&#8217;s evaluation strategy would produce
the wrong answer. (A bonus point for explaining why Ben&#8217;s way of thinking about environments is conceptually wrong, irrespective of whether
or not it produces the right answer.)</p><h5>3.7.3<tt>&nbsp;</tt><a name="(part._wsubst-app)"></a>Application</h5><p>In 850 words or less, describe if and how your knowledge of first-class functions will help you in your future programming practice.
Good answers might discuss how this concept can be applied in interesting programming environments or how knowledge of its subtleties
clarifies or improves existing practices, techniques, tools, etc.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="rinterp.html" title="backward to &quot;3.6 Rudimentary Interpreter&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html#(part._assignments)" title="up to &quot;3 Assignments&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="xinterp.html" title="forward to &quot;3.8 Extended Interpreter&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>