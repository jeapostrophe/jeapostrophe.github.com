<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>2013-10-29: Addition on Turing Machines</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--><link href="atom.xml" rel="alternate" title="Jay McCarthy" type="application/atom+xml"/><script type="text/javascript">var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30131476-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();</script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Jay Mc<span class="mywbr"> &nbsp;</span>Carthy</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="cat-categories.html" class="tocviewlink" data-pltdoc="x">Categories</a></td></tr><tr><td align="right"></td><td><a href="archive.html" class="tocviewselflink" data-pltdoc="x">Archive</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="archive.html" class="tocviewlink" data-pltdoc="x">Archive</a></td></tr></table></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">2013-<wbr></wbr>10-<wbr></wbr>29:<span class="mywbr"> &nbsp;</span> Addition on Turing Machines</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Turing_.Machines%29" class="tocviewlink" data-pltdoc="x">Turing Machines</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Unary_.Addition%29" class="tocviewlink" data-pltdoc="x">Unary Addition</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Binary_.Increment%29" class="tocviewlink" data-pltdoc="x">Binary Increment</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Binary_.Decrement%29" class="tocviewlink" data-pltdoc="x">Binary Decrement</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="#%28part._.Binary_.Addition%29" class="tocviewlink" data-pltdoc="x">Binary Addition</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="#%28part._.Binary_.Addition_with_.Three_.Tapes%29" class="tocviewlink" data-pltdoc="x">Binary Addition with Three Tapes</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="#%28part._.Yo__.It_s_almost_time_to_go_%29" class="tocviewlink" data-pltdoc="x">Yo! It&rsquo;s almost time to go!</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Unary_.Addition%29" class="tocsubseclink" data-pltdoc="x">Unary Addition</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Binary_.Increment%29" class="tocsubseclink" data-pltdoc="x">Binary Increment</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Binary_.Decrement%29" class="tocsubseclink" data-pltdoc="x">Binary Decrement</a></td></tr><tr><td><span class="tocsublinknumber">5<tt>&nbsp;</tt></span><a href="#%28part._.Binary_.Addition%29" class="tocsubseclink" data-pltdoc="x">Binary Addition</a></td></tr><tr><td><span class="tocsublinknumber">6<tt>&nbsp;</tt></span><a href="#%28part._.Binary_.Addition_with_.Three_.Tapes%29" class="tocsubseclink" data-pltdoc="x">Binary Addition with Three Tapes</a></td></tr><tr><td><span class="tocsublinknumber">7<tt>&nbsp;</tt></span><a href="#%28part._.Yo__.It_s_almost_time_to_go_%29" class="tocsubseclink" data-pltdoc="x">Yo! It&rsquo;s almost time to go!</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="2013-10-23-sudoku-post.html" title="backward to &quot;2013-10-23: Solving Sudoku in Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="archive.html" title="up to &quot;Archive&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="2013-11-05-chk-post.html" title="forward to &quot;2013-11-05: Implementing a Short Hand for Rackunit Tests&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4><a name="(part._post)"></a>2013-10-29: Addition on Turing Machines</h4><div class="SAuthorListBox"><span class="SAuthorList"><p class="author"><a href="index.html" data-pltdoc="x">Jay McCarthy</a></p></span></div><p><div class="SIntrapara"></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>The source for this post is online at <a href="https://github.com/jeapostrophe/jeapostrophe.github.com/tree/source/posts/2013-10-29-tmadd.scrbl">2013-10-29-tmadd.scrbl</a>.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara"><span style="font-weight: bold">Categories:</span> <a href="cat-categories.html#%28part._.Languages%29" data-pltdoc="x">Languages</a> <a href="cat-categories.html#%28part._.Algorithms%29" data-pltdoc="x">Algorithms</a> <a href="cat-categories.html#%28part._.Theory%29" data-pltdoc="x">Theory</a> <a href="cat-categories.html#%28part._.Computer._.Science%29" data-pltdoc="x">Computer Science</a> </div></p><p>Ever since my time as an undergraduate in computer science, I&rsquo;ve been
fascinated by
<a href="http://en.wikipedia.org/wiki/Automata_theory">automata</a> and
<a href="http://en.wikipedia.org/wiki/Turing_machine">Turing machines</a>
in particular. However, something I always found disappointing against
Turing machines as a model of computation, in contrast to the
<a href="http://en.wikipedia.org/wiki/Lambda_calculus">lambda
calculus</a>, was that I was never presented with useful Turing machines
that did work anyone could care about. In this blog post, I try to
rectify this by presenting a variety of machines that do addition.</p><blockquote class="SCentered"><p>-</p></blockquote><h5>1<tt>&nbsp;</tt><a name="(part._.Turing_.Machines)"></a>Turing Machines</h5><p>Formally, a Turing machine is a seven tuple: the finite set of
states (Q), the finite set of symbols (Gamma), the blank symbol, the
finite set of input symbols (that cannot contain the blank), the
starting state (which must be in Q), the final states (a subset of Q),
and the transition function. The transition function consumes a Q and
a Gamma and returns a Q, Gamma, and the symbol <span class="RktInBG"><span class="hspace"></span><span class="RktIn">L</span><span class="hspace"></span></span> or
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">R</span><span class="hspace"></span></span>. The machine is interpreted relative to an infinite tape
that contains all blank symbols, except just after the head, which
contains a string of the input symbols. As the transition function is
called, it overwrites symbols on the tape and moves the head.</p><p>A Turing machine gets its computational power from the infinite-ness
of the tape and the ability to move around on that infinite tape. It
stays practical because the set of states and symbols are all finite,
so you can&rsquo;t play too many games representing complex situations. (For
instance, you can easily have a Turing machine that "remembers" that
it read a particular number, by having a state for "read the number
7". However, you cannot have a Turing machine with the state "read the
number <span class="RktInBG"><span class="hspace"></span><span class="RktIn">n</span><span class="hspace"></span></span>" for every natural number <span class="RktInBG"><span class="hspace"></span><span class="RktIn">n</span><span class="hspace"></span></span>, because
there are an infinite number of them.)</p><p>If the Turing machine is still too abstract for you, I hope these
example machines will clarify it.</p><p>In order to help me in preparing these examples machines, I wrote a
<a href="https://github.com/jeapostrophe/exp/blob/master/turing-machines.rkt">little
simulation environment</a> for Turing machines in Racket. It allows you
to specify the seven tuple directly, but I found it a bit tedious to
do that. I wrote a helper that allows you to just specify the
transition function and it derives all the sets from the things that
occur in the transition function. The only cases were this doesn&rsquo;t
really work are for the blank symbol (which I assume will be
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">_</span><span class="hspace"></span></span>), the initial state (which I assume is the first one
listed), and the final states (which I assume is named
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">HALT</span><span class="hspace"></span></span>).</p><h5>2<tt>&nbsp;</tt><a name="(part._.Unary_.Addition)"></a>Unary Addition</h5><p>Let&rsquo;s look at the first example: unary addition.</p><p>A number represented in unary is essentially a string that is a long
as the number. For instance, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">**</span><span class="hspace"></span></span> would represent the number
<span class="RktVal">2</span>.</p><p>The unary addition machine takes strings of the form <span class="RktInBG"><span class="hspace"></span><span class="RktIn">* ... + * ...</span><span class="hspace"></span></span> and reduces them to a single unary number which represents the
sum of the two numbers. For instance, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">* * + * * *</span><span class="hspace"></span></span> is
rewritten to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">* * * * *</span><span class="hspace"></span></span>. For convenience, all the machines I
present will relocate the head to the start of the number before they
halt.</p><p>The idea of the machine is reframe the problem as purely textual. It
needs to replace the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span> with a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">*</span><span class="hspace"></span></span> and then change
the last <span class="RktInBG"><span class="hspace"></span><span class="RktIn">*</span><span class="hspace"></span></span> to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">_</span><span class="hspace"></span></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">implicit-unary-addition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">implicit-tm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">consume-first-number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">consume-first-number</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">consume-second-number</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">consume-second-number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">consume-second-number</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">override-last-*</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">override-last-*</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-beginning</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">seek-beginning</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-beginning</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">HALT</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>This process just has four states. In the first one, we skip over the
first number (because the Turing machine has to write every
transition, it just writes what it read). We&rsquo;ve reached the end of the
first number when we see <span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span>, so we write <span class="RktInBG"><span class="hspace"></span><span class="RktIn">*</span><span class="hspace"></span></span> and then
go to the next state. In the second state, we skip over the second
number. We know we&rsquo;ve reached the end of when we see <span class="RktInBG"><span class="hspace"></span><span class="RktIn">_</span><span class="hspace"></span></span>, but
the number is one <span class="RktInBG"><span class="hspace"></span><span class="RktIn">*</span><span class="hspace"></span></span> too long, so, we go back one <span class="RktInBG"><span class="hspace"></span><span class="RktIn">*</span><span class="hspace"></span></span>
and replace it with <span class="RktInBG"><span class="hspace"></span><span class="RktIn">_</span><span class="hspace"></span></span>. Then, we go back to the beginning,
skipping over the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">*</span><span class="hspace"></span></span>s.</p><p>This process takes 15 steps to perform the addition <span class="RktInBG"><span class="hspace"></span><span class="RktIn">2 + 3</span><span class="hspace"></span></span>. The trace looks like this:</p><p><table cellspacing="0"><tr><td><p><span class="stt">consume-first-number :</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[*]*+***</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 0}</span></p></td></tr><tr><td><p><span class="stt">consume-first-number :</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">*[*]+***</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 1}</span></p></td></tr><tr><td><p><span class="stt">consume-first-number :</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">**[+]***</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 2}</span></p></td></tr><tr><td><p><span class="stt">consume-second-number:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">***[*]**</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 3}</span></p></td></tr><tr><td><p><span class="stt">consume-second-number:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">****[*]*</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 4}</span></p></td></tr><tr><td><p><span class="stt">consume-second-number:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">*****[*]</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 5}</span></p></td></tr><tr><td><p><span class="stt">consume-second-number:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">******[_] { 6}</span></p></td></tr><tr><td><p><span class="stt">override-last-*</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">*****[*]_ { 7}</span></p></td></tr><tr><td><p><span class="stt">seek-beginning</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">****[*]__ { 8}</span></p></td></tr><tr><td><p><span class="stt">seek-beginning</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">***[*]*__ { 9}</span></p></td></tr><tr><td><p><span class="stt">seek-beginning</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">**[*]**__ {10}</span></p></td></tr><tr><td><p><span class="stt">seek-beginning</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">*[*]***__ {11}</span></p></td></tr><tr><td><p><span class="stt">seek-beginning</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[*]****__ {12}</span></p></td></tr><tr><td><p><span class="stt">seek-beginning</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: [_]*****__ {13}</span></p></td></tr><tr><td><p><span class="stt">HALT</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: _[*]****__ {14}</span></p></td></tr></table></p><p>We don&rsquo;t really need to go back to the beginning, but it seems polite
to and it makes the programs a little harder to write.</p><p>Something that is very important to understand about this machine is
that the symbol <span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span> has no meaning. The Turing machine is
<span style="font-style: italic">not</span> interpreting one arithmetic operation out of many possible
operations it can perform. The <span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span> is just an arbitrary
delimiter between the two numbers.</p><h5>3<tt>&nbsp;</tt><a name="(part._.Binary_.Increment)"></a>Binary Increment</h5><p>Unary numbers are very unexciting, particularly because the problem of
addition is just a textual operation. Binary numbers seem less like
this, so let&rsquo;s switch to adding numbers in binary. However, it&rsquo;s going
to be pretty complicated, so we&rsquo;ll start small: just incrementing a
binary number by 1.</p><p>For example, if you have <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 0 1 0</span><span class="hspace"></span></span>, then it increments to
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 0 1 1</span><span class="hspace"></span></span>, which itself increments to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 1 0 0</span><span class="hspace"></span></span>. If
you study examples like this, you should see that when you increment,
you just need to turn all the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span>s on the right into
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">0</span><span class="hspace"></span></span>s and turn the first <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0</span><span class="hspace"></span></span> into a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span>. This
is trivial to implement in a Turing machine:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">implicit-binary-add1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">implicit-tm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">find-end</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">zero-until-0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">HALT</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>It takes seven steps to increment <span class="RktInBG"><span class="hspace"></span><span class="RktIn">2</span><span class="hspace"></span></span> to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">3</span><span class="hspace"></span></span>. And we
don&rsquo;t even move the head back to the start!</p><p><table cellspacing="0"><tr><td><p><span class="stt">find-end</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: [0]010</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{0}</span></p></td></tr><tr><td><p><span class="stt">find-end</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: 0[0]10</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{1}</span></p></td></tr><tr><td><p><span class="stt">find-end</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: 00[1]0</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{2}</span></p></td></tr><tr><td><p><span class="stt">find-end</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: 001[0]</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{3}</span></p></td></tr><tr><td><p><span class="stt">find-end</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: 0010[_] {4}</span></p></td></tr><tr><td><p><span class="stt">zero-until-0: 001[0]_ {5}</span></p></td></tr><tr><td><p><span class="stt">HALT</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: 00[1]1_ {6}</span></p></td></tr></table></p><p>I hope that you&rsquo;re starting to see that it is useful to ignore the
<span style="font-style: italic">meaning</span> of your Turing machine problem and focus on what the
problem is textually.</p><h5>4<tt>&nbsp;</tt><a name="(part._.Binary_.Decrement)"></a>Binary Decrement</h5><p>Next, let&rsquo;s go the other direction and decrement binary numbers. For
example, if you have <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 1 0 0</span><span class="hspace"></span></span>, then it decrements to
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 0 1 1</span><span class="hspace"></span></span>, which itself decrements to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 0 1 0</span><span class="hspace"></span></span>.</p><p>The key here is to switch the number into
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span>s-complement (swapping all the bits), then increment that
number, then redo the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span>s-complement. For convenience and to
conserve steps, we can combine a few of the steps together. For
instance, in the process of doing the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span>s-complement, we will
find the end, so we can immediately to the increment starting from the
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">zero-until-0</span><span class="hspace"></span></span> state. However, we&rsquo;ll have to go back to the
right from wherever we end up in the number to do the complement again
in the other direction, which will conveniently place the head back at
the left.</p><p>This machine is considerably longer than the previous ones, but I hope
it is still comprehensible:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">implicit-binary-sub1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">implicit-tm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ones-complement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ones-complement</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ones-complement</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">add1:zero-until-0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">add1:find-end</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ones-complementR</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">ones-complementR</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ones-complementR</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ones-complementR</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">HALT</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The trace of decrementing <span class="RktInBG"><span class="hspace"></span><span class="RktIn">3</span><span class="hspace"></span></span> to <span class="RktInBG"><span class="hspace"></span><span class="RktIn">2</span><span class="hspace"></span></span> takes 13 steps:</p><p><table cellspacing="0"><tr><td><p><span class="stt">ones-complement</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[0]011</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 0}</span></p></td></tr><tr><td><p><span class="stt">ones-complement</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">1[0]11</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 1}</span></p></td></tr><tr><td><p><span class="stt">ones-complement</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">11[1]1</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 2}</span></p></td></tr><tr><td><p><span class="stt">ones-complement</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">110[1]</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ 3}</span></p></td></tr><tr><td><p><span class="stt">ones-complement</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">1100[_] { 4}</span></p></td></tr><tr><td><p><span class="stt">add1:zero-until-0:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">110[0]_ { 5}</span></p></td></tr><tr><td><p><span class="stt">add1:find-end</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">1101[_] { 6}</span></p></td></tr><tr><td><p><span class="stt">ones-complementR :</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">110[1]_ { 7}</span></p></td></tr><tr><td><p><span class="stt">ones-complementR :</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">11[0]0_ { 8}</span></p></td></tr><tr><td><p><span class="stt">ones-complementR :</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">1[1]10_ { 9}</span></p></td></tr><tr><td><p><span class="stt">ones-complementR :</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[1]010_ {10}</span></p></td></tr><tr><td><p><span class="stt">ones-complementR : [_]0010_ {11}</span></p></td></tr><tr><td><p><span class="stt">HALT</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: _[0]010_ {12}</span></p></td></tr></table></p><p>The thing I find most interesting about this machine is the way we
logically "call another machine" to do the increment. Unfortunately,
Turing machines lack any concept of a "call" or even something like a
stack to record what to do after the increment "routine" is done. You
could imagine simulating the stack with some additional information on
the tape, but it&rsquo;s definitely not trivial. Instead we have to directly
embed the increment code, including hard-wiring what it "returns to"
when it is done, namely <span class="RktInBG"><span class="hspace"></span><span class="RktIn">ones-complementR</span><span class="hspace"></span></span>.</p><h5>5<tt>&nbsp;</tt><a name="(part._.Binary_.Addition)"></a>Binary Addition</h5><p>At this point, we&rsquo;re ready to do real binary addition. For example,
the input <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 0 1 0 + 0 0 1 1</span><span class="hspace"></span></span> (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">2 + 3</span><span class="hspace"></span></span>) will halt at
the tape <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 1 0 1</span><span class="hspace"></span></span> (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">5</span><span class="hspace"></span></span>).</p><p><div class="SIntrapara">Here&rsquo;s the algorithm the Turing machine will implement, as Racket
code:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">y</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._sub1%29%29" class="RktValLink" data-pltdoc="x">sub1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>This trivial Racket program is pretty excruciating to write down as a
Turing machine. First, we can&rsquo;t really call other functions, so we
need to inline the code and hard-wire the "returns". (The same
inlining idea applies to the <span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span>.) Second, there aren&rsquo;t
really "arguments" in a Turing machine, there is just "the tape", so
we have discover when one number ends and the other number starts by
looking for the delimiter (or the blank symbol). Finally, we can&rsquo;t
really just return one of the numbers, we have to erase the other
number.</p><p>Since I&rsquo;ve already shown how to do increment and decrement, the code
should be fairly understandable, but skip ahead for an explanation if
it is not clear.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">implicit-binary-add</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">implicit-tm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">check-if-zero</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-if-zero</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;sub1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;zero</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">seek-left&amp;sub1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;sub1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;sub1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:ones-complement</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">sub1:ones-complement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:ones-complement</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:ones-complement</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:add1:zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">sub1:add1:zero-until-0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:add1:zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">sub1:add1:find-end</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:ones-complementR</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">sub1:ones-complementR</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:ones-complementR</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sub1:ones-complementR</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-right&amp;add1</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">seek-right&amp;add1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-right&amp;add1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-right&amp;add1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">add1:find-end</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:find-end</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">add1:zero-until-0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1:zero-until-0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;continue</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">seek-left&amp;continue</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;continue</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;continue</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;continue</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">check-if-zero</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">seek-left&amp;zero</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-left&amp;zero</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-start</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">seek-start</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">seek-start</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-right-once</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-right-once</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">move-right-once</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">HALT</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The machine starts reading numbers and if it gets to a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span>,
then it goes back to the left and then does the decrement
operation (where <span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span> is the end of the number, and not
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">_</span><span class="hspace"></span></span>). After the decrement is finished, it seeks to the
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span> and then starts the increment operation. Once the
increment is over, it seeks the left-most <span class="RktInBG"><span class="hspace"></span><span class="RktIn">_</span><span class="hspace"></span></span>, which puts the
head back in front of the equation where it can return to the initial
state. If in the initial state, it reaches the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">+</span><span class="hspace"></span></span> without
reading a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1</span><span class="hspace"></span></span>, then the left number must have been
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">0</span><span class="hspace"></span></span>, so it goes back to the left and erases the number as it
goes, then goes back to the right and puts the head before the right
number.</p><p>It takes 98 steps for this machine to add <span class="RktInBG"><span class="hspace"></span><span class="RktIn">2 + 3</span><span class="hspace"></span></span>, but it
works! It just has one constraint: the numbers must be initialized to
the length on the output number. For instance <span class="RktInBG"><span class="hspace"></span><span class="RktIn">1 1 + 1 1</span><span class="hspace"></span></span> will
fail, but <span class="RktInBG"><span class="hspace"></span><span class="RktIn">0 1 1 + 0 1 1</span><span class="hspace"></span></span> will succeed.</p><h5>6<tt>&nbsp;</tt><a name="(part._.Binary_.Addition_with_.Three_.Tapes)"></a>Binary Addition with Three Tapes</h5><p>There is a variant of a Turing machine called a
<a href="http://en.wikipedia.org/wiki/Multitape_Turing_machine">multi-tape
Turing machine</a> where there are many different tapes that can be read
and updated simultaneously. If we had such a Turing machine, binary
addition could be a lot simpler.</p><p>For instance, imagine having three tapes: one for the left operand,
one for the right, and one for the answer. Then, store the bits in
increasing significance (rather than traditional decreasing
significance). Then, a purely right-moving Turing machine could add
the numbers in one pass with just two states&#8212;<wbr></wbr>one for when there is a
carry bit and the other for when there is not.</p><p>Every multi-tape Turing machine has a one tape equivalent, according
to the theory, but it may increase the number of steps quadratically
to simulate the movement of each tape. Fortunately in this case, we
can easily write down the one tape equivalent once we realize that the
tape only goes in one direction.</p><p>We can represent all combinations of the two input tape&rsquo;s values as
four symbols: <span class="RktInBG"><span class="hspace"></span><span class="RktIn">(0 0)</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">(0 1)</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">(1 0)</span><span class="hspace"></span></span>, and
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">(1 1)</span><span class="hspace"></span></span>. (It may seem against the rules to do this, but it&rsquo;s
not. We can use any finite set as the set Gamma. If you prefer to keep
the symbols to a single digit, then you can replace them with
<span class="RktInBG"><span class="hspace"></span><span class="RktIn">A</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">B</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">C</span><span class="hspace"></span></span>, and <span class="RktInBG"><span class="hspace"></span><span class="RktIn">D</span><span class="hspace"></span></span>, but it is
really unnecessary.)</p><p>Since we know the machine doesn&rsquo;t need to read any tape more than
once, as we move to the right we can just erase the two tapes with the
value on the third tape.</p><p>When we put these ideas together, the machine is very simple:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">implicit-binary-add-mt</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">implicit-tm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">no-carry</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-carry</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-carry</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-carry</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">carry</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">HALT</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">L</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">carry</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">no-carry</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">carry</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">carry</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">carry</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">HALT</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">R</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>This machine takes six steps to add <span class="RktInBG"><span class="hspace"></span><span class="RktIn">2 + 3</span><span class="hspace"></span></span>:</p><p><table cellspacing="0"><tr><td><p><span class="stt">no-carry: [(0 1)] (1 1) (0 0) (0 0)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{0}</span></p></td></tr><tr><td><p><span class="stt">no-carry:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">[(1 1)](0 0) (0 0)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{1}</span></p></td></tr><tr><td><p><span class="stt">carry</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">0</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[(0 0)](0 0)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{2}</span></p></td></tr><tr><td><p><span class="stt">no-carry:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">0</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[(0 0)]</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{3}</span></p></td></tr><tr><td><p><span class="stt">no-carry:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">0</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">0</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">_</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">] {4}</span></p></td></tr><tr><td><p><span class="stt">HALT</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">:</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">0</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">0</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">]</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">_</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">{5}</span></p></td></tr></table></p><p>I like the contrast between these two machines a lot. The first binary
adder shows the pain of low-level programming with Turing machines:
you don&rsquo;t have any ability to have internal memory or function calls,
but you can still do something hard. The second shows that if you free
yourself from thinking about it as a real machine that is constrained
to binary digits, you can think of a clever way to represent the three
tapes in one tape and do the work very fast. I think it&rsquo;s a beautiful
representation of how Turing machine are simultaneously an abstract
mathematical device <span style="font-style: italic">and</span> a fairly accurate model of real
physical automatons.</p><h5>7<tt>&nbsp;</tt><a name="(part._.Yo__.It_s_almost_time_to_go_)"></a>Yo! It&rsquo;s almost time to go!</h5><p>But first let&rsquo;s remember what we did today!</p><p>Turing machines are basic computers implemented in math.</p><p>Most problems on Turing machines are easy if you make them about text
and not about mathematical values.</p><p>Turing machines don&rsquo;t really have internal memory or function calls,
which stinks.</p><p>Multi-tape Turing machines feel much more powerful that single-tape
machines, but they&rsquo;re not.</p><p><div id="disqus_thread"><script type="text/javascript">
var disqus_shortname = 'jaymccarthy';
var disqus_identifier = 'http://jeapostrophe.github.com/blog/2013/10/29/tmadd/';
var disqus_url = 'http://jeapostrophe.github.com/2013-10-29-tmadd-post.html';
var disqus_script = 'embed.js';
(function () {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());

</script><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="2013-10-23-sudoku-post.html" title="backward to &quot;2013-10-23: Solving Sudoku in Racket&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="archive.html" title="up to &quot;Archive&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="2013-11-05-chk-post.html" title="forward to &quot;2013-11-05: Implementing a Short Hand for Rackunit Tests&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>